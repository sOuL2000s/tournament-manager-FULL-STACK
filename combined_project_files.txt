// src/pages/KnockoutPage.jsx
import React, { useEffect, useState, useCallback, useRef, useMemo } from 'react';
import { useParams, Link, useSearchParams } from 'react-router-dom';
import { db } from '../firebase';
import { doc, getDoc, collection, addDoc, query, orderBy, onSnapshot, updateDoc, deleteDoc, writeBatch, getDocs, where } from 'firebase/firestore';
import { useAuth } from '../hooks/useAuth';
import Modal from '../components/Modal';
import ScoreInputModalContent from '../components/ScoreInputModalContent';

export default function KnockoutPage() {
    // State variables for tournament data and UI
    const { id: tournamentId } = useParams();
    const [searchParams] = useSearchParams();
    const shareId = searchParams.get('shareId');
    const { user, loading: authLoading } = useAuth();
    const [tournamentName, setTournamentName] = useState('Loading...');
    const [matches, setMatches] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);
    const [tournamentOwnerId, setTournamentOwnerId] = useState(null);
    const [tournamentDetails, setTournamentDetails] = useState(null);

    // State for adding new matches manually
    const [isAddingMatch, setIsAddingMatch] = useState(false);
    const [newMatch, setNewMatch] = useState({
        round: '',
        teamA: '',
        teamB: '',
        winner: null,
        scoreA: null,
        scoreB: null,
        status: 'scheduled'
    });

    // State and refs for modal management and score input
    const [modalOpen, setModalOpen] = useState(false);
    const [modalTitle, setModalTitle] = useState('');
    const [modalMessage, setModalMessage] = useState('');
    const [modalShowConfirmButton, setModalShowConfirmButton] = useState(true);
    const [modalContent, setModalContent] = useState(null);
    const [modalConfirmAction, setModalConfirmAction] = useState(null);
    const scoreInputRef = useRef(null);

    // State for teams (used for selection in forms) and SVG path rendering
    const [teams, setTeams] = useState([]);
    const [svgPaths, setSvgPaths] = useState([]);

    // Refs for DOM elements to measure positions for SVG lines
    const bracketContainerRef = useRef(null);
    const matchRefs = useRef({});

    // Ref to manage setTimeout for debouncing SVG path calculations
    // This must be at the top level to prevent "Rendered more hooks" errors.
    const timeoutRef = useRef(null);

    // Callback to open the modal with dynamic content and actions
    const openModal = useCallback((title, message, showConfirm, content = null, confirmAction = null) => {
        setModalTitle(title);
        setModalMessage(message);
        setModalShowConfirmButton(showConfirm);
        setModalContent(content);
        // Store the confirm action as a function reference
        setModalConfirmAction(() => confirmAction);
        setModalOpen(true);
    }, []);

    // Callback to close the modal and reset its state
    const closeModal = useCallback(() => {
        setModalOpen(false);
        setModalTitle('');
        setModalMessage('');
        setModalShowConfirmButton(true);
        setModalContent(null);
        setModalConfirmAction(null); // Clear confirm action on close
    }, []);

    // Memoized value to determine if the current user has view-only access
    const isViewOnly = useMemo(() => {
        // If shareId is present, OR if user is not logged in AND tournament is public
        return (!!shareId) || (!user && (tournamentDetails?.isPublic || false));
    }, [shareId, user, tournamentDetails]);


    // Effect to fetch tournament and match data, and set up real-time listeners
    useEffect(() => {
        const fetchData = async () => {
            // Wait for Firebase auth to load before proceeding
            if (authLoading) return;

            if (!tournamentId) {
                setError("No tournament ID provided.");
                setLoading(false);
                return;
            }

            try {
                // Fetch tournament details (name, owner ID, type)
                const tournamentDocRef = doc(db, 'tournaments', tournamentId);
                const tournamentSnap = await getDoc(tournamentDocRef);

                if (tournamentSnap.exists()) {
                    const data = tournamentSnap.data();
                    setTournamentName(data.name);
                    setTournamentOwnerId(data.userId);
                    setTournamentDetails(data); // Store full tournament details
                } else {
                    setError("Tournament not found.");
                    setLoading(false);
                    return;
                }

                // Set up real-time listener for knockout matches, ordered by round and team name
                const matchesCollectionRef = collection(db, `tournaments/${tournamentId}/knockoutMatches`);
                const q = query(matchesCollectionRef, orderBy('roundOrder', 'asc'), orderBy('teamA', 'asc'));

                const unsubscribe = onSnapshot(q, (snapshot) => {
                    const fetchedMatches = snapshot.docs.map(doc => ({
                        id: doc.id,
                        ...doc.data(),
                        scoreA: doc.data().scoreA ?? null, // Ensure scores are null if not set
                        scoreB: doc.data().scoreB ?? null,
                    }));
                    setMatches(fetchedMatches);
                    setLoading(false);
                    setError(null); // Clear any previous errors if data loads successfully
                }, (err) => {
                    console.error('Real-time listener error for knockout matches:', err);
                    setError('Failed to load knockout matches. Please try again.');
                    setLoading(false);
                });

                // Set up real-time listener for teams (for dropdowns in forms)
                const teamsCollectionRef = collection(db, `tournaments/${tournamentId}/teams`);
                const unsubscribeTeams = onSnapshot(query(teamsCollectionRef, orderBy('name', 'asc')), (snapshot) => {
                    setTeams(snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));
                }, (err) => {
                    console.error('Real-time listener error for teams:', err);
                });

                // Cleanup function for listeners
                return () => {
                    unsubscribe();
                    unsubscribeTeams();
                };

            } catch (err) {
                console.error("Error fetching tournament data:", err);
                setError("Failed to load tournament data.");
                setLoading(false);
            }
        };

        fetchData();
    }, [tournamentId, user, authLoading, shareId, tournamentDetails?.isPublic]); // Re-run if these dependencies change


    // Utility function to get round name and order based on the number of teams in that round
    const getRoundDetails = useCallback((numTeamsInRound) => {
        if (numTeamsInRound <= 0) return { name: 'Unknown', order: 99 };
        // numTeamsInRound refers to the number of *teams* competing in that specific round.
        switch (numTeamsInRound) {
            case 2: return { name: 'Final', order: 4 };
            case 4: return { name: 'Semi-Finals', order: 3 };
            case 8: return { name: 'Quarter-Finals', order: 2 };
            case 16: return { name: 'Round of 16', order: 1 };
            case 32: return { name: 'Round of 32', order: 0 };
            default: return { name: `Round of ${numTeamsInRound}`, order: 99 };
        }
    }, []);

    // Group matches by round name for display
    const groupedRounds = matches.reduce((acc, match) => {
        const roundName = match.round || 'Unnamed Round';
        if (!acc[roundName]) {
            acc[roundName] = [];
        }
        acc[roundName].push(match);
        return acc;
    }, {});

    // Sort round names for consistent display order using the calculated round order
    const sortedRoundNames = Object.keys(groupedRounds).sort((a, b) => {
        // The length of the array `groupedRounds[a]` gives the number of matches in that round.
        // Each match involves 2 teams, so `length * 2` gives the total teams that started that round.
        const orderA = getRoundDetails(groupedRounds[a].length * 2).order;
        const orderB = getRoundDetails(groupedRounds[b].length * 2).order;
        return orderA - orderB;
    });

    // Function to automatically determine qualifying teams and generate the initial bracket
    const generateAutomaticInitialBracket = async () => {
        // Permissions check
        if (!tournamentDetails || isViewOnly || user?.uid !== tournamentOwnerId) {
            openModal('Access Denied', 'You do not have permission to generate brackets.', false);
            return;
        }

        // Tournament type check
        if (tournamentDetails.type !== 'Multi-Phase') {
            openModal('Not a Multi-Phase Tournament', 'Automatic bracket generation is only available for Multi-Phase tournaments.', false);
            return;
        }

        const numQualifiersPerGroup = tournamentDetails.qualifiersPerGroup || 0;
        const definedGroups = tournamentDetails.groups || [];

        // Validation for qualifier settings
        if (numQualifiersPerGroup <= 0) {
            openModal('Invalid Qualifiers Setting', 'Please set the "Teams to Qualify Per Group" in Tournament Settings to a number greater than 0.', false);
            return;
        }
        if (definedGroups.length === 0) {
            openModal('Missing Groups', 'No groups defined for this Multi-Phase tournament. Please define groups (e.g., Group A, Group B) in Tournament Settings first.', false);
            return;
        }

        const qualifiedTeamsFromGroups = [];
        let hasUncompletedGroupFixtures = false;

        // Iterate through each group to find qualified teams
        for (const groupName of definedGroups) {
            // Fetch leaderboard data for the current group
            const leaderboardQuery = query(
                collection(db, `tournaments/${tournamentId}/leaderboard`),
                where('group', '==', groupName),
                orderBy('points', 'desc'),
                orderBy('goalDifference', 'desc'),
                orderBy('goalsFor', 'desc')
            );
            const leaderboardSnap = await getDocs(leaderboardQuery);
            const groupStandings = leaderboardSnap.docs.map(doc => doc.data());

            // Check if all fixtures for this group are completed
            const groupFixturesQuery = query(
                collection(db, `tournaments/${tournamentId}/fixtures`),
                where('groupId', '==', groupName)
            );
            const groupFixturesSnap = await getDocs(groupFixturesQuery);
            const allGroupFixtures = groupFixturesSnap.docs.map(doc => doc.data());
            const completedGroupFixtures = allGroupFixtures.filter(f => f.status === 'completed');

            if (completedGroupFixtures.length < allGroupFixtures.length) {
                hasUncompletedGroupFixtures = true;
                break; // Stop if any group has uncompleted fixtures
            }

            // Take top N teams from each group
            const topTeamsInGroup = groupStandings.slice(0, numQualifiersPerGroup);
            if (topTeamsInGroup.length < numQualifiersPerGroup) {
                 openModal('Not Enough Qualified Teams', `Group "${groupName}" does not have enough teams or completed matches to qualify ${numQualifiersPerGroup} teams. Ensure all group matches are played and enough teams are present.`, false);
                 return;
            }
            qualifiedTeamsFromGroups.push(...topTeamsInGroup.map(team => ({ id: team.id, name: team.name })));
        }

        // Final checks before generating bracket
        if (hasUncompletedGroupFixtures) {
            openModal('Uncompleted Group Fixtures', 'Some group stage matches are not yet completed. Please complete all group stage fixtures before generating the knockout bracket.', false);
            return;
        }
        if (qualifiedTeamsFromGroups.length < 2) {
            openModal('Not Enough Qualifiers', 'Not enough teams qualified from the group stage to generate a bracket. Ensure teams have completed matches in groups and your qualification settings are correct.', false);
            return;
        }

        const bracketSize = qualifiedTeamsFromGroups.length;
        if (![2, 4, 8, 16, 32].includes(bracketSize)) {
            openModal('Invalid Qualification Count', `The total number of qualified teams (${bracketSize}) is not a valid bracket size (2, 4, 8, 16, 32). Please adjust your "Teams to Qualify Per Group" setting or the number of groups to form a valid bracket.`, false);
            return;
        }

        const initialRoundDetails = getRoundDetails(bracketSize);
        // Check if knockout matches already exist to prevent accidental re-generation
        const existingKnockoutMatchesQuery = query(collection(db, `tournaments/${tournamentId}/knockoutMatches`));
        const existingKnockoutMatchesSnap = await getDocs(existingKnockoutMatchesQuery);
        if (!existingKnockoutMatchesSnap.empty) {
            openModal('Bracket Already Exists', 'A knockout bracket already exists. If you wish to re-generate, please delete existing knockout matches manually first.', false);
            return;
        }

        // Confirmation dialog for bracket generation
        openModal(
            'Confirm Automatic Bracket Generation',
            `This will generate a new ${bracketSize}-team knockout bracket starting with ${initialRoundDetails.name} based on the top ${numQualifiersPerGroup} teams from each group. Are you sure?`,
            true, // showConfirmButton
            null, // no custom content
            async () => { // confirmAction
                try {
                    const batch = writeBatch(db);
                    const matchesCollectionRef = collection(db, `tournaments/${tournamentId}/knockoutMatches`);

                    // Shuffle teams to randomize initial pairings
                    const shuffledTeams = [...qualifiedTeamsFromGroups].sort(() => Math.random() - 0.5);

                    // Create initial round matches in a batch
                    for (let i = 0; i < shuffledTeams.length; i += 2) {
                        const newMatchRef = doc(matchesCollectionRef); // Let Firestore auto-generate ID
                        batch.set(newMatchRef, {
                            round: initialRoundDetails.name,
                            roundOrder: initialRoundDetails.order,
                            teamA: shuffledTeams[i].name,
                            teamB: shuffledTeams[i + 1].name,
                            winner: null,
                            scoreA: null,
                            scoreB: null,
                            status: 'scheduled'
                        });
                    }

                    await batch.commit();
                    closeModal(); // Close confirmation modal
                    openModal('Success', `Successfully generated ${bracketSize}-team knockout bracket automatically!`, false);
                } catch (err) {
                    console.error('Error generating automatic knockout bracket:', err);
                    openModal('Error', 'Failed to generate automatic knockout bracket. Please try again.', false);
                }
            }
        );
    };


    // Handle adding a new knockout match manually
    const handleAddMatch = async () => {
        // Permissions check
        if (!tournamentDetails || isViewOnly || user?.uid !== tournamentOwnerId) {
            openModal('Access Denied', 'You do not have permission to add matches.', false);
            return;
        }
        // Input validation
        if (!newMatch.round.trim() || !newMatch.teamA.trim() || !newMatch.teamB.trim()) {
            openModal('Validation Error', 'Please fill in all match details.', false);
            return;
        }
        // Assign a high round order for manual matches so they don't interfere with auto-generated order
        const manualRoundOrder = 100;
        try {
            await addDoc(collection(db, `tournaments/${tournamentId}/knockoutMatches`), {
                ...newMatch,
                roundOrder: manualRoundOrder,
                scoreA: null,
                scoreB: null,
                status: 'scheduled'
            });
            // Reset form and UI state
            setNewMatch({ round: '', teamA: '', teamB: '', winner: null, scoreA: null, scoreB: null, status: 'scheduled' });
            setIsAddingMatch(false);
            openModal('Success', 'Match added successfully!', false);
        } catch (err) {
            console.error('Error adding match:', err);
            openModal('Error', 'Failed to add match. Please try again.', false);
        }
    };

    // Handle updating scores for an existing knockout match
    const handleUpdateScores = useCallback(async (matchToEdit) => {
        // Permissions check
        if (!tournamentDetails || isViewOnly || user?.uid !== tournamentOwnerId) {
            openModal('Access Denied', 'You do not have permission to update scores.', false);
            return;
        }

        // Inner function for confirming and processing score update (allows re-attempts if validation fails)
        const confirmAction = async () => {
            if (!scoreInputRef.current) {
                openModal('Error', 'Internal error: Cannot read scores. Please try again.', false);
                return;
            }
            const scoreA = scoreInputRef.current.getScoreA();
            const scoreB = scoreInputRef.current.getScoreB();

            const parsedScoreA = parseInt(scoreA);
            const parsedScoreB = parseInt(scoreB);

            // Validate numeric input for scores
            if (isNaN(parsedScoreA) || isNaN(parsedScoreB)) {
                openModal('Invalid Input', 'Please enter valid numbers for scores.', true,
                    <ScoreInputModalContent
                        ref={scoreInputRef}
                        fixture={matchToEdit}
                        initialScoreA={scoreA} // Pass back current input values for correction
                        initialScoreB={scoreB}
                    />,
                    () => confirmAction() // Pass confirmAction itself for re-attempt
                );
                return;
            }

            let winner = null;
            if (parsedScoreA > parsedScoreB) {
                winner = matchToEdit.teamA;
            } else if (parsedScoreB > parsedScoreA) {
                winner = matchToEdit.teamB;
            } else {
                winner = 'Draw'; // Special handling for draws in knockout (usually not allowed)
                openModal('Draw in Knockout', 'A draw is not typically allowed in knockout matches. Please ensure one team is declared a winner (e.g., via penalty shootout).', false);
                return;
            }

            try {
                // Update match document in Firestore
                const matchRef = doc(db, `tournaments/${tournamentId}/knockoutMatches`, matchToEdit.id);
                await updateDoc(matchRef, {
                    scoreA: parsedScoreA,
                    scoreB: parsedScoreB,
                    status: 'completed',
                    winner: winner
                });
                closeModal(); // Close score input modal
                openModal('Success', 'Score updated successfully!', false);
            } catch (err) {
                console.error('Error updating scores:', err);
                openModal('Error', 'Failed to update scores. Please try again.', true,
                    <ScoreInputModalContent
                        ref={scoreInputRef}
                        fixture={matchToEdit}
                        initialScoreA={scoreA}
                        initialScoreB={scoreB}
                    />,
                    () => confirmAction() // Allow re-attempt on error
                );
            }
        };

        // Open the score input modal
        openModal(
            'Update Match Scores',
            `Enter scores for ${matchToEdit.teamA} vs ${matchToEdit.teamB}:`,
            true, // showConfirmButton
            <ScoreInputModalContent
                ref={scoreInputRef}
                fixture={matchToEdit}
                initialScoreA={matchToEdit.scoreA}
                initialScoreB={matchToEdit.scoreB}
            />,
            confirmAction // Pass the confirm action here
        );
    }, [isViewOnly, user, tournamentOwnerId, openModal, closeModal, tournamentId, tournamentDetails]);


    // Handle deleting a knockout match
    const handleDeleteMatch = async (matchId) => {
        // Permissions check
        if (!tournamentDetails || isViewOnly || user?.uid !== tournamentOwnerId) {
            openModal('Access Denied', 'You do not have permission to delete matches.', false);
            return;
        }

        // Confirmation action for deletion
        const confirmDeleteAction = async () => {
            try {
                await deleteDoc(doc(db, `tournaments/${tournamentId}/knockoutMatches`, matchId));
                closeModal();
                openModal('Success', 'Match deleted successfully!', false);
            } catch (err) {
                console.error('Error deleting match:', err);
                openModal('Error', 'Failed to delete match. Please try again.', false);
            }
        };

        openModal('Confirm Delete', 'Are you sure you want to delete this match?', true, null, confirmDeleteAction);
    };

    // Function to seed the next round based on winners of the current round
    const handleSeedNextRound = async () => {
        // Permissions check
        if (!tournamentDetails || isViewOnly || user?.uid !== tournamentOwnerId) {
            openModal('Access Denied', 'You do not have permission to seed the next round.', false);
            return;
        }

        // Filter for completed matches with a clear winner
        const completedMatches = matches.filter(m => m.status === 'completed' && m.winner !== null && m.winner !== 'Draw');
        if (completedMatches.length === 0) {
            openModal('No Completed Matches', 'No matches have been completed to seed the next round. Complete matches in the current round first.', false);
            return;
        }

        // Group completed matches by their round order to find the latest completed round
        const completedMatchesByRound = completedMatches.reduce((acc, match) => {
            if (!acc[match.roundOrder]) {
                acc[match.roundOrder] = [];
            }
            acc[match.roundOrder].push(match);
            return acc;
        }, {});

        const sortedCompletedRoundOrders = Object.keys(completedMatchesByRound).map(Number).sort((a, b) => a - b);
        const latestCompletedRoundOrder = sortedCompletedRoundOrders[sortedCompletedRoundOrders.length - 1];
        const matchesInLatestRound = completedMatchesByRound[latestCompletedRoundOrder];

        // Check for odd number of winners (implies a problem in bracket or data)
        if (matchesInLatestRound.length % 2 !== 0) {
            openModal('Invalid Round State', 'The number of winners in the last round is odd. Cannot seed next round. Ensure all matches have a winner.', false);
            return;
        }

        const winners = matchesInLatestRound.map(m => m.winner).filter(Boolean);
        if (winners.length === 0) {
            openModal('No Winners', 'No winners found in the latest completed round to seed the next round.', false);
            return;
        }

        // Determine the details for the next round
        const nextRoundOrder = latestCompletedRoundOrder + 1;
        const nextRoundDetails = getRoundDetails(winners.length); // Calculate based on number of winners
        const nextRoundName = nextRoundDetails.name;

        // Prevent seeding if matches for the next round already exist
        const existingNextRoundMatchesQuery = query(
            collection(db, `tournaments/${tournamentId}/knockoutMatches`),
            where('roundOrder', '==', nextRoundOrder)
        );
        const existingNextRoundMatchesSnap = await getDocs(existingNextRoundMatchesQuery);
        if (!existingNextRoundMatchesSnap.empty) {
             openModal('Next Round Already Seeded', `Matches for the "${nextRoundName}" round already exist.`, false);
             return;
        }

        // Confirmation dialog for seeding next round
        openModal(
            'Confirm Seed Next Round',
            `This will create new matches for the "${nextRoundName}" round based on winners from the previous round. Are you sure?`,
            true,
            null,
            async () => {
                try {
                    const batch = writeBatch(db);
                    const matchesCollectionRef = collection(db, `tournaments/${tournamentId}/knockoutMatches`);

                    // Randomize pairings for the next round
                    const shuffledWinners = [...winners].sort(() => Math.random() - 0.5);

                    // Create new matches in a batch
                    for (let i = 0; i < shuffledWinners.length; i += 2) {
                        const newMatchRef = doc(matchesCollectionRef);
                        batch.set(newMatchRef, {
                            round: nextRoundName,
                            roundOrder: nextRoundOrder,
                            teamA: shuffledWinners[i],
                            teamB: shuffledWinners[i + 1],
                            winner: null,
                            scoreA: null,
                            scoreB: null,
                            status: 'scheduled'
                        });
                    }

                    await batch.commit();
                    closeModal();
                    openModal('Success', `Successfully seeded ${shuffledWinners.length / 2} matches for the ${nextRoundName} round!`, false);
                } catch (err) {
                    console.error('Error seeding next round:', err);
                    openModal('Error', 'Failed to seed next round. Please try again.', false);
                }
            }
        );
    };

    // Common navigation links for the tournament sections
    const commonNavLinks = (
        <div className="bg-red-600 text-white p-4 font-bold text-lg flex flex-wrap justify-around sm:flex-nowrap">
            <Link to={isViewOnly ? `/tournament/${tournamentId}?shareId=${shareId}` : `/tournament/${tournamentId}`} className="flex-1 text-center py-2 px-1 hover:bg-red-700 transition-colors text-sm sm:text-base">LEAGUE</Link>
            <Link to={isViewOnly ? `/tournament/${tournamentId}/fixtures?shareId=${shareId}` : `/tournament/${tournamentId}/fixtures`} className="flex-1 text-center py-2 px-1 hover:bg-red-700 transition-colors text-sm sm:text-base">FIXTURES</Link>
            <Link to={isViewOnly ? `/tournament/${tournamentId}/players?shareId=${shareId}` : `/tournament/${tournamentId}/players`} className="flex-1 text-center py-2 px-1 hover:bg-red-700 transition-colors text-sm sm:text-base">TOP SCORERS</Link>
            <Link to={isViewOnly ? `/tournament/${tournamentId}/stats?shareId=${shareId}` : `/tournament/${tournamentId}/stats`} className="flex-1 text-center py-2 px-1 hover:bg-red-700 transition-colors text-sm sm:text-base">STATS</Link>
            <Link to={isViewOnly ? `/tournament/${tournamentId}/knockout?shareId=${shareId}` : `/tournament/${tournamentId}/knockout`} className="flex-1 text-center py-2 px-1 hover:bg-red-700 transition-colors text-sm sm:text-base">KNOCKOUT</Link>
            <Link to={isViewOnly ? `/tournament/${tournamentId}/ai-prediction?shareId=${shareId}` : `/tournament/${tournamentId}/ai-prediction`} className="flex-1 text-center py-2 px-1 hover:bg-red-700 transition-colors text-sm sm:text-base">AI PREDICTION</Link>
        </div>
    );

    // Group teams by their assigned group (currently unused in this component's render, but available)
    const groupedTeams = teams.reduce((acc, team) => {
        const group = team.group || 'Ungrouped';
        if (!acc[group]) {
            acc[group] = [];
        }
        acc[group].push(team);
        return acc;
    }, {});

    const sortedGroupNames = Object.keys(groupedTeams).sort((a, b) => {
        if (a === 'Ungrouped') return 1;
        if (b === 'Ungrouped') return -1;
        return a.localeCompare(b);
    });

    // Conditional rendering for loading and error states
    if (loading || authLoading) {
        return (
            <div className="flex flex-col min-h-screen bg-white dark:bg-gray-900 text-gray-900 dark:text-white">
                {commonNavLinks}
                <div className="p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto w-full">
                    <h2 className="text-xl sm:text-2xl font-bold mb-4 text-center">🏆 Knockout Bracket ({tournamentName})</h2>
                    <p className="text-center text-gray-500 py-8">Loading knockout bracket...</p>
                </div>
            </div>
        );
    }

    if (error) {
        return (
            <div className="flex flex-col min-h-screen bg-white dark:bg-gray-900 text-gray-900 dark:text-white">
                {commonNavLinks}
                <div className="p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto w-full">
                    <h2 className="text-xl sm:text-2xl font-bold mb-4 text-center">🏆 Knockout Bracket ({tournamentName})</h2>
                    <p className="text-center text-red-500 py-8">{error}</p>
                </div>
            </div>
        );
    }

    // Determine if the current user is the owner of the tournament
    const isOwner = user && user.uid === tournamentOwnerId;

    // Callback function to calculate SVG paths for connecting lines in the bracket
    const calculateSvgPaths = useCallback(() => {
        const paths = []; // This array will store the final SVG path strings.
        if (!bracketContainerRef.current) {
            return [];
        }

        const containerRect = bracketContainerRef.current.getBoundingClientRect();
        const svgOffsetX = containerRect.left;
        const svgOffsetY = containerRect.top;

        // Collect positions of all rendered matches
        const liveMatchPositions = {};
        sortedRoundNames.forEach((roundName, roundIndex) => {
            groupedRounds[roundName].forEach((match, matchIndex) => {
                const element = matchRefs.current[match.id];
                if (element) {
                    const rect = element.getBoundingClientRect();
                    liveMatchPositions[match.id] = {
                        x: rect.left - svgOffsetX,
                        y: rect.top - svgOffsetY,
                        width: rect.width,
                        height: rect.height,
                        roundIndex: roundIndex,
                        matchIndex: matchIndex
                    };
                }
            });
        });

        sortedRoundNames.forEach((roundName, roundIndex) => {
            const currentRoundMatches = groupedRounds[roundName];

            currentRoundMatches.forEach((match, matchIndex) => {
                const currentMatchPos = liveMatchPositions[match.id];
                if (!currentMatchPos) return;

                const matchCenterY = currentMatchPos.y + currentMatchPos.height / 2;
                const matchRightX = currentMatchPos.x + currentMatchPos.width;
                const matchLeftX = currentMatchPos.x;

                // Draw lines from previous round to current match (input lines)
                if (roundIndex > 0) {
                    const prevRoundName = sortedRoundNames[roundIndex - 1];
                    const prevRoundMatches = groupedRounds[prevRoundName];

                    // Determine parent matches based on current match's index in its round
                    const parentMatchIndex1 = matchIndex * 2;
                    const parentMatchIndex2 = matchIndex * 2 + 1;

                    const parent1 = prevRoundMatches[parentMatchIndex1];
                    const parent2 = prevRoundMatches[parentMatchIndex2];

                    if (parent1 && parent2) {
                        const parentPos1 = liveMatchPositions[parent1.id];
                        const parentPos2 = liveMatchPositions[parent2.id];

                        if (parentPos1 && parentPos2) {
                            const parent1CenterY = parentPos1.y + parentPos1.height / 2;
                            const parent2CenterY = parentPos2.y + parentPos2.height / 2;
                            const parentRightX = parentPos1.x + parentPos1.width;

                            // Calculate the horizontal distance between rounds and the midpoint for the vertical connector
                            const distanceBetweenRounds = currentMatchPos.x - parentRightX;
                            const segmentLength = Math.max(0, distanceBetweenRounds / 2);
                            const horizontalTurnX = parentRightX + segmentLength;

                            // Path from parent 1: horizontal segment
                            paths.push(`M ${parentRightX} ${parent1CenterY} H ${horizontalTurnX}`);
                            // Path from parent 2: horizontal segment
                            paths.push(`M ${parentRightX} ${parent2CenterY} H ${horizontalTurnX}`);

                            // Vertical segments to connect parent lines to the child's center Y
                            paths.push(`M ${horizontalTurnX} ${parent1CenterY} V ${matchCenterY}`);
                            paths.push(`M ${horizontalTurnX} ${parent2CenterY} V ${matchCenterY}`);

                            // Final horizontal segment from the connection point to the current match's left edge
                            paths.push(`M ${horizontalTurnX} ${matchCenterY} H ${matchLeftX}`);
                        }
                    }
                }

                // Draw horizontal line extending from the right of the current match box (output line)
                // This line points towards the next round's match
                if (roundIndex < sortedRoundNames.length - 1) {
                    const nextRoundName = sortedRoundNames[roundIndex + 1];
                    const nextRoundMatches = groupedRounds[nextRoundName];

                    // Determine the child match in the next round
                    const childMatchIndexInNextRound = Math.floor(matchIndex / 2);
                    const childMatch = nextRoundMatches[childMatchIndexInNextRound];

                    if (childMatch && liveMatchPositions[childMatch.id]) {
                        const childMatchPos = liveMatchPositions[childMatch.id];
                        const horizontalLineStart = matchRightX;
                        // End of this line is roughly halfway to the next match's start
                        const horizontalLineEnd = matchRightX + ((childMatchPos.x - matchRightX) / 2);
                        paths.push(`M ${horizontalLineStart} ${matchCenterY} H ${horizontalLineEnd}`);
                    } else {
                        // For the final winner or if there's no clear next match, draw a shorter line
                        paths.push(`M ${matchRightX} ${matchCenterY} L ${matchRightX + 20} ${matchCenterY}`);
                    }
                }
            });
        });

        // Handle the final winner line for the very last match in the bracket
        if (sortedRoundNames.length > 0) {
            const lastRoundName = sortedRoundNames[sortedRoundNames.length - 1];
            const lastRoundMatches = groupedRounds[lastRoundName];
            if (lastRoundMatches.length === 1) { // Only one match in the final round
                const finalMatch = lastRoundMatches[0];
                const finalMatchPos = liveMatchPositions[finalMatch.id];
                if (finalMatchPos) {
                    const startX = finalMatchPos.x + finalMatchPos.width;
                    const startY = finalMatchPos.y + finalMatchPos.height / 2;
                    const endX = startX + 50; // Extend line to the right
                    paths.push(`M ${startX} ${startY} L ${endX} ${startY}`);
                }
            }
        }
        return paths;
    }, [matches, sortedRoundNames, groupedRounds]); // Dependencies for useCallback are correct

    // Effect to recalculate SVG paths when matches data changes or window is resized
    useEffect(() => {
        const updatePaths = () => {
            setSvgPaths(calculateSvgPaths());
        };

        // Clear any existing timeout before setting a new one (debouncing initial render)
        if (timeoutRef.current) {
            clearTimeout(timeoutRef.current);
        }
        timeoutRef.current = setTimeout(updatePaths, 200); // Initial delay to ensure elements are rendered

        // Handle resize events with debouncing
        const handleResize = () => {
            if (timeoutRef.current) {
                clearTimeout(timeoutRef.current);
            }
            timeoutRef.current = setTimeout(updatePaths, 50); // Small debounce for resize
        };

        window.addEventListener('resize', handleResize);

        // Set up MutationObserver to detect changes in DOM structure or styles that affect layout
        const observer = new MutationObserver((mutationsList) => {
            let relevantChange = false;
            for (let mutation of mutationsList) {
                // Check for childList changes (elements added/removed) or attribute changes (style/class affecting layout)
                if (mutation.type === 'childList' ||
                    (mutation.type === 'attributes' && (mutation.attributeName === 'style' || mutation.attributeName === 'class'))
                ) {
                    relevantChange = true;
                    break;
                }
            }
            if (relevantChange) {
                // Debounce re-calculation if a relevant change is detected
                if (timeoutRef.current) {
                    clearTimeout(timeoutRef.current);
                }
                timeoutRef.current = setTimeout(updatePaths, 50);
            }
        });

        // Observe the bracket container for changes
        if (bracketContainerRef.current) {
            observer.observe(bracketContainerRef.current, { childList: true, subtree: true, attributes: true });
        }

        // Cleanup function: remove event listener, disconnect observer, clear any pending timeout
        return () => {
            if (timeoutRef.current) {
                clearTimeout(timeoutRef.current);
            }
            window.removeEventListener('resize', handleResize);
            observer.disconnect();
        };
    }, [matches, calculateSvgPaths]); // Re-run effect when matches data or calculateSvgPaths function changes

    return (
        <div className="flex flex-col min-h-screen bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white">
            {commonNavLinks}

            <div className="flex-grow p-4 sm:p-6 lg:p-8 w-full overflow-x-auto">
                <h2 className="text-2xl sm:text-3xl font-bold mb-6 text-center text-gray-900 dark:text-white">
                    🏆 Knockout Bracket ({tournamentName})
                </h2>

                {/* Tournament Controls - only show if owner and not in view-only mode */}
                {!isViewOnly && isOwner && (
                    <div className="flex flex-col sm:flex-row justify-center items-center gap-4 mb-6">
                        {tournamentDetails && tournamentDetails.type === 'Multi-Phase' && (
                            <button
                                onClick={generateAutomaticInitialBracket}
                                className="bg-purple-600 text-white px-6 py-3 rounded-lg shadow-md hover:bg-purple-700 transition-colors duration-200 font-semibold text-base whitespace-nowrap"
                            >
                                Generate Initial Bracket
                            </button>
                        )}
                        <button
                            onClick={handleSeedNextRound}
                            className="bg-green-600 text-white px-6 py-3 rounded-lg shadow-md hover:bg-green-700 transition-colors duration-200 font-semibold text-base whitespace-nowrap"
                        >
                            Seed Next Round
                        </button>
                        <button
                            onClick={() => setIsAddingMatch(!isAddingMatch)}
                            className="bg-blue-600 text-white px-6 py-3 rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-200 font-semibold text-base whitespace-nowrap"
                        >
                            {isAddingMatch ? 'Hide Add Match Form' : '➕ Add New Match'}
                        </button>
                    </div>
                )}

                {/* Form for manually adding new matches */}
                {isAddingMatch && !isViewOnly && isOwner && (
                    <div className="mb-8 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 max-w-2xl mx-auto">
                        <h3 className="text-xl font-bold mb-4 text-center">Add New Knockout Match</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label htmlFor="roundName" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Round Name</label>
                                <input
                                    type="text"
                                    id="roundName"
                                    placeholder="e.g., Quarter-Finals"
                                    value={newMatch.round}
                                    onChange={e => setNewMatch({ ...newMatch, round: e.target.value })}
                                    className="w-full p-3 border border-gray-300 rounded-md shadow-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                                />
                            </div>
                            <div>
                                <label htmlFor="teamA" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Team A</label>
                                <input
                                    type="text"
                                    id="teamA"
                                    placeholder="Team A Name"
                                    value={newMatch.teamA}
                                    onChange={e => setNewMatch({ ...newMatch, teamA: e.target.value })}
                                    className="w-full p-3 border border-gray-300 rounded-md shadow-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                                />
                            </div>
                            <div>
                                <label htmlFor="teamB" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Team B</label>
                                <input
                                    type="text"
                                    id="teamB"
                                    placeholder="Team B Name"
                                    value={newMatch.teamB}
                                    onChange={e => setNewMatch({ ...newMatch, teamB: e.target.value })}
                                    className="w-full p-3 border border-gray-300 rounded-md shadow-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                                />
                            </div>
                            <div className="md:col-span-2 flex justify-center">
                                <button
                                    onClick={handleAddMatch}
                                    className="bg-green-600 text-white px-6 py-3 rounded-lg shadow-md hover:bg-green-700 transition-colors duration-200 font-semibold text-base w-full max-w-xs"
                                >
                                    Create Match
                                </button>
                            </div>
                        </div>
                    </div>
                )}

                {/* Conditional rendering for empty bracket or the actual bracket display */}
                {matches.length === 0 ? (
                    <p className="text-center text-gray-500 dark:text-gray-400 text-lg py-10">
                        No knockout matches configured for this tournament yet.
                        {!isViewOnly && isOwner && " Use the 'Generate Initial Bracket' or 'Add New Match' button to create them."}
                    </p>
                ) : (
                    <div ref={bracketContainerRef} className="flex justify-center items-start gap-0 p-2 relative min-h-[400px]">
                        {/* SVG for drawing lines dynamically, positioned absolutely over the bracket */}
                        <svg className="absolute inset-0 w-full h-full pointer-events-none z-0">
                            {svgPaths.map((d, index) => (
                                <path key={index} d={d} stroke="#6B7280" strokeWidth="2" fill="none" />
                            ))}
                        </svg>

                        {/* Render each round as a column */}
                        {sortedRoundNames.map((roundName, roundIndex) => (
                            <div key={roundName}
                                className={`flex flex-col items-center flex-shrink-0 `}
                                style={{
                                    flex: `1`, // Distribute width evenly among rounds
                                    maxWidth: `calc(100% / ${sortedRoundNames.length})`, // Ensure columns don't grow too much
                                }}
                            >
                                {/* Round title, sticky at the top */}
                                <h3 className="text-lg sm:text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200 text-center sticky top-0 bg-gray-100 dark:bg-gray-900 z-10 w-full py-2">
                                    {roundName}
                                </h3>
                                {/* Container for matches in the current round, with dynamic vertical gap */}
                                <div className="flex flex-col w-full"
                                    style={{ gap: `${Math.pow(2, roundIndex) * 20}px` }}
                                >
                                    {/* Render each match in the current round */}
                                    {groupedRounds[roundName].map((match) => (
                                        <div
                                            key={match.id}
                                            className="relative flex items-center justify-center min-h-[50px]" // Minimum height for consistent spacing
                                            ref={el => { // Attach ref to store DOM element for SVG path calculations
                                                if (el) matchRefs.current[match.id] = el;
                                                else delete matchRefs.current[match.id];
                                            }}
                                        >
                                            <div
                                                className={`flex flex-col items-center text-center p-2 rounded-md border-2 border-gray-400 dark:border-gray-600
                                                    ${match.status === 'completed' ? 'border-green-500 dark:border-green-500' : ''}
                                                    bg-white dark:bg-gray-700 shadow-sm transition-colors duration-200 w-full max-w-[200px] relative z-10`}
                                            >
                                                <p className="font-medium text-gray-900 dark:text-white text-sm sm:text-base break-words">{match.teamA}</p>
                                                <div className="w-full border-t border-gray-200 dark:border-gray-500 my-1"></div>
                                                <p className="font-medium text-gray-900 dark:text-white text-sm sm:text-base break-words">{match.teamB}</p>
                                                
                                                {/* Display scores if completed, otherwise 'Scheduled' */}
                                                {match.status === 'completed' && match.scoreA !== null && match.scoreB !== null ? (
                                                    <p className="mt-1 text-sm font-bold text-green-600 dark:text-green-400">
                                                        {match.scoreA} - {match.scoreB}
                                                    </p>
                                                ) : (
                                                    <p className="mt-1 text-xs text-gray-500 dark:text-gray-400">Scheduled</p>
                                                )}
                                                {/* Display winner if available and not a draw */}
                                                {match.winner && match.winner !== 'Draw' && (
                                                    <p className="mt-1 text-xs font-semibold text-blue-600 dark:text-blue-400">
                                                        Winner: {match.winner}
                                                    </p>
                                                )}

                                                {/* Action buttons (Update, Delete) - only for owner and not in view-only mode */}
                                                {!isViewOnly && isOwner && (
                                                    <div className="flex flex-col sm:flex-row gap-1 mt-2 w-full text-xs">
                                                        <button
                                                            onClick={() => handleUpdateScores(match)}
                                                            className="flex-1 bg-yellow-500 text-white px-1 py-1 rounded-sm hover:bg-yellow-600 transition-colors"
                                                        >
                                                            Update
                                                        </button>
                                                        <button
                                                            onClick={() => handleDeleteMatch(match.id)}
                                                            className="flex-1 bg-red-500 text-white px-1 py-1 rounded-sm hover:bg-red-600 transition-colors"
                                                        >
                                                            Delete
                                                        </button>
                                                    </div>
                                                )}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        ))}
                    </div>
                )}
            </div>

            {/* Modal component for various messages and confirmations */}
            <Modal
                isOpen={modalOpen}
                onClose={closeModal}
                onConfirm={modalConfirmAction}
                title={modalTitle}
                message={modalMessage}
                showConfirmButton={modalShowConfirmButton}
            >
                {modalContent}
            </Modal>
        </div>
    );
}


----------------------------

early-page.js:6583 [cs:early-page]: Running on page: http://localhost:5173/tournament/8yQ87P2a7YZ6vUuI6UCb/knockout top=true
early-page.js:6583 [cs:early-page]: Assigned globalThis.twoseven
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
early-page.js:6583 [cs:early-page]: Running on page: https://tournament-manager-a4d0f.firebaseapp.com/__/auth/iframe?apiKey=AIzaSyDs0YoqU9ROo73yX1lvLvN0C8OiK4LZd4w&appName=%5BDEFAULT%5D&v=10.14.1&eid=p&usegapi=1&jsh=m%3B%2F_%2Fscs%2Fabc-static%2F_%2Fjs%2Fk%3Dgapi.lb.en.iFs_Bhrqdio.O%2Fd%3D1%2Frs%3DAHpOoo-IvlQWaLHZdUKQFbafXd_3OEvU9Q%2Fm%3D__features__#id=I0_1753727704692&_gfid=I0_1753727704692&parent=http%3A%2F%2Flocalhost%3A5173&pfname=&rpctoken=16197190 top=false
early-page.js:6583 [cs:early-page]: Assigned globalThis.twoseven
index-CUHM8_N7.js:1639 TypeError: Cannot read properties of undefined (reading 'profile')
    at onUpdate-profile (index-CUHM8_N7.js:72853:26)
logError @ index-CUHM8_N7.js:1639
handleError @ index-CUHM8_N7.js:1635
(anonymous) @ index-CUHM8_N7.js:1592
Promise.catch
callWithAsyncErrorHandling @ index-CUHM8_N7.js:1591
emit @ index-CUHM8_N7.js:6302
updateProfile @ index-CUHM8_N7.js:72560
(anonymous) @ index-CUHM8_N7.js:72591
(anonymous) @ index-CUHM8_N7.js:2634
callWithErrorHandling @ index-CUHM8_N7.js:1582
callWithAsyncErrorHandling @ index-CUHM8_N7.js:1589
hook.__weh.hook.__weh @ index-CUHM8_N7.js:2619
flushPostFlushCbs @ index-CUHM8_N7.js:1734
render2 @ index-CUHM8_N7.js:5875
mount @ index-CUHM8_N7.js:3444
app.mount @ index-CUHM8_N7.js:9297
(anonymous) @ index-CUHM8_N7.js:72860
assets/index-CUHM8_N7.js @ index-CUHM8_N7.js:72867
__require @ index-CUHM8_N7.js:3
(anonymous) @ index-CUHM8_N7.js:72870
knockout:1 Unchecked runtime.lastError: The message port closed before a response was received.
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
hook.js:608 ⚠️ React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition. Error Component Stack
    at BrowserRouter (react-router-dom.js?v=d58f0536:5247:5)
    at App (App.jsx:24:37)
overrideMethod @ hook.js:608
warnOnce @ react-router-dom.js?v=d58f0536:4393
logDeprecation @ react-router-dom.js?v=d58f0536:4396
logV6DeprecationWarnings @ react-router-dom.js?v=d58f0536:4399
(anonymous) @ react-router-dom.js?v=d58f0536:5271
commitHookEffectListMount @ chunk-BVI7NZOO.js?v=d58f0536:16915
commitPassiveMountOnFiber @ chunk-BVI7NZOO.js?v=d58f0536:18156
commitPassiveMountEffects_complete @ chunk-BVI7NZOO.js?v=d58f0536:18129
commitPassiveMountEffects_begin @ chunk-BVI7NZOO.js?v=d58f0536:18119
commitPassiveMountEffects @ chunk-BVI7NZOO.js?v=d58f0536:18109
flushPassiveEffectsImpl @ chunk-BVI7NZOO.js?v=d58f0536:19490
flushPassiveEffects @ chunk-BVI7NZOO.js?v=d58f0536:19447
(anonymous) @ chunk-BVI7NZOO.js?v=d58f0536:19328
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
hook.js:608 ⚠️ React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath. Error Component Stack
    at BrowserRouter (react-router-dom.js?v=d58f0536:5247:5)
    at App (App.jsx:24:37)
overrideMethod @ hook.js:608
warnOnce @ react-router-dom.js?v=d58f0536:4393
logDeprecation @ react-router-dom.js?v=d58f0536:4396
logV6DeprecationWarnings @ react-router-dom.js?v=d58f0536:4402
(anonymous) @ react-router-dom.js?v=d58f0536:5271
commitHookEffectListMount @ chunk-BVI7NZOO.js?v=d58f0536:16915
commitPassiveMountOnFiber @ chunk-BVI7NZOO.js?v=d58f0536:18156
commitPassiveMountEffects_complete @ chunk-BVI7NZOO.js?v=d58f0536:18129
commitPassiveMountEffects_begin @ chunk-BVI7NZOO.js?v=d58f0536:18119
commitPassiveMountEffects @ chunk-BVI7NZOO.js?v=d58f0536:18109
flushPassiveEffectsImpl @ chunk-BVI7NZOO.js?v=d58f0536:19490
flushPassiveEffects @ chunk-BVI7NZOO.js?v=d58f0536:19447
(anonymous) @ chunk-BVI7NZOO.js?v=d58f0536:19328
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
index.js:265 [iframe-cs]: Skipping since we're not on a twoseven tab
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
KnockoutPage.jsx?t=1753727692521:616 Warning: React has detected a change in the order of Hooks called by KnockoutPage. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks

   Previous render            Next render
   ------------------------------------------------------
1. useContext                 useContext
2. useRef                     useRef
3. useRef                     useRef
4. useContext                 useContext
5. useContext                 useContext
6. useMemo                    useMemo
7. useContext                 useContext
8. useContext                 useContext
9. useContext                 useContext
10. useContext                useContext
11. useContext                useContext
12. useContext                useContext
13. useContext                useContext
14. useRef                    useRef
15. useContext                useContext
16. useLayoutEffect           useLayoutEffect
17. useCallback               useCallback
18. useCallback               useCallback
19. useState                  useState
20. useState                  useState
21. useState                  useState
22. useEffect                 useEffect
23. useState                  useState
24. useState                  useState
25. useState                  useState
26. useState                  useState
27. useState                  useState
28. useState                  useState
29. useState                  useState
30. useState                  useState
31. useState                  useState
32. useState                  useState
33. useState                  useState
34. useState                  useState
35. useState                  useState
36. useState                  useState
37. useRef                    useRef
38. useState                  useState
39. useState                  useState
40. useRef                    useRef
41. useRef                    useRef
42. useCallback               useCallback
43. useCallback               useCallback
44. useMemo                   useMemo
45. useEffect                 useEffect
46. useCallback               useCallback
47. useMemo                   useMemo
48. useMemo                   useMemo
49. useCallback               useCallback
50. useCallback               useCallback
51. useCallback               useCallback
52. useCallback               useCallback
53. useCallback               useCallback
54. undefined                 useCallback
   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 Error Component Stack
    at KnockoutPage (KnockoutPage.jsx?t=1753727692521:27:32)
    at ProtectedRoute (ProtectedRoute.jsx:5:42)
    at RenderedRoute (react-router-dom.js?v=d58f0536:4088:5)
    at Routes (react-router-dom.js?v=d58f0536:4558:5)
    at div (<anonymous>)
    at div (<anonymous>)
    at Router (react-router-dom.js?v=d58f0536:4501:15)
    at BrowserRouter (react-router-dom.js?v=d58f0536:5247:5)
    at App (App.jsx:24:37)
overrideMethod @ hook.js:608
printWarning @ chunk-BVI7NZOO.js?v=d58f0536:521
error @ chunk-BVI7NZOO.js?v=d58f0536:505
warnOnHookMismatchInDev @ chunk-BVI7NZOO.js?v=d58f0536:11495
updateHookTypesDev @ chunk-BVI7NZOO.js?v=d58f0536:11465
useCallback @ chunk-BVI7NZOO.js?v=d58f0536:12692
useCallback @ chunk-4HAMFFQC.js?v=d58f0536:1090
KnockoutPage @ KnockoutPage.jsx?t=1753727692521:616
renderWithHooks @ chunk-BVI7NZOO.js?v=d58f0536:11548
updateFunctionComponent @ chunk-BVI7NZOO.js?v=d58f0536:14582
beginWork @ chunk-BVI7NZOO.js?v=d58f0536:15924
beginWork$1 @ chunk-BVI7NZOO.js?v=d58f0536:19753
performUnitOfWork @ chunk-BVI7NZOO.js?v=d58f0536:19198
workLoopSync @ chunk-BVI7NZOO.js?v=d58f0536:19137
renderRootSync @ chunk-BVI7NZOO.js?v=d58f0536:19116
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18678
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
chunk-BVI7NZOO.js?v=d58f0536:11678 Uncaught Error: Rendered more hooks than during the previous render.
    at updateWorkInProgressHook (chunk-BVI7NZOO.js?v=d58f0536:11678:21)
    at updateCallback (chunk-BVI7NZOO.js?v=d58f0536:12177:22)
    at Object.useCallback (chunk-BVI7NZOO.js?v=d58f0536:12693:22)
    at useCallback (chunk-4HAMFFQC.js?v=d58f0536:1090:29)
    at KnockoutPage (KnockoutPage.jsx?t=1753727692521:616:29)
    at renderWithHooks (chunk-BVI7NZOO.js?v=d58f0536:11548:26)
    at updateFunctionComponent (chunk-BVI7NZOO.js?v=d58f0536:14582:28)
    at beginWork (chunk-BVI7NZOO.js?v=d58f0536:15924:22)
    at HTMLUnknownElement.callCallback2 (chunk-BVI7NZOO.js?v=d58f0536:3674:22)
    at Object.invokeGuardedCallbackDev (chunk-BVI7NZOO.js?v=d58f0536:3699:24)
updateWorkInProgressHook @ chunk-BVI7NZOO.js?v=d58f0536:11678
updateCallback @ chunk-BVI7NZOO.js?v=d58f0536:12177
useCallback @ chunk-BVI7NZOO.js?v=d58f0536:12693
useCallback @ chunk-4HAMFFQC.js?v=d58f0536:1090
KnockoutPage @ KnockoutPage.jsx?t=1753727692521:616
renderWithHooks @ chunk-BVI7NZOO.js?v=d58f0536:11548
updateFunctionComponent @ chunk-BVI7NZOO.js?v=d58f0536:14582
beginWork @ chunk-BVI7NZOO.js?v=d58f0536:15924
callCallback2 @ chunk-BVI7NZOO.js?v=d58f0536:3674
invokeGuardedCallbackDev @ chunk-BVI7NZOO.js?v=d58f0536:3699
invokeGuardedCallback @ chunk-BVI7NZOO.js?v=d58f0536:3733
beginWork$1 @ chunk-BVI7NZOO.js?v=d58f0536:19765
performUnitOfWork @ chunk-BVI7NZOO.js?v=d58f0536:19198
workLoopSync @ chunk-BVI7NZOO.js?v=d58f0536:19137
renderRootSync @ chunk-BVI7NZOO.js?v=d58f0536:19116
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18678
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
chunk-BVI7NZOO.js?v=d58f0536:11678 Uncaught Error: Rendered more hooks than during the previous render.
    at updateWorkInProgressHook (chunk-BVI7NZOO.js?v=d58f0536:11678:21)
    at updateCallback (chunk-BVI7NZOO.js?v=d58f0536:12177:22)
    at Object.useCallback (chunk-BVI7NZOO.js?v=d58f0536:12693:22)
    at useCallback (chunk-4HAMFFQC.js?v=d58f0536:1090:29)
    at KnockoutPage (KnockoutPage.jsx?t=1753727692521:616:29)
    at renderWithHooks (chunk-BVI7NZOO.js?v=d58f0536:11548:26)
    at updateFunctionComponent (chunk-BVI7NZOO.js?v=d58f0536:14582:28)
    at beginWork (chunk-BVI7NZOO.js?v=d58f0536:15924:22)
    at HTMLUnknownElement.callCallback2 (chunk-BVI7NZOO.js?v=d58f0536:3674:22)
    at Object.invokeGuardedCallbackDev (chunk-BVI7NZOO.js?v=d58f0536:3699:24)
updateWorkInProgressHook @ chunk-BVI7NZOO.js?v=d58f0536:11678
updateCallback @ chunk-BVI7NZOO.js?v=d58f0536:12177
useCallback @ chunk-BVI7NZOO.js?v=d58f0536:12693
useCallback @ chunk-4HAMFFQC.js?v=d58f0536:1090
KnockoutPage @ KnockoutPage.jsx?t=1753727692521:616
renderWithHooks @ chunk-BVI7NZOO.js?v=d58f0536:11548
updateFunctionComponent @ chunk-BVI7NZOO.js?v=d58f0536:14582
beginWork @ chunk-BVI7NZOO.js?v=d58f0536:15924
callCallback2 @ chunk-BVI7NZOO.js?v=d58f0536:3674
invokeGuardedCallbackDev @ chunk-BVI7NZOO.js?v=d58f0536:3699
invokeGuardedCallback @ chunk-BVI7NZOO.js?v=d58f0536:3733
beginWork$1 @ chunk-BVI7NZOO.js?v=d58f0536:19765
performUnitOfWork @ chunk-BVI7NZOO.js?v=d58f0536:19198
workLoopSync @ chunk-BVI7NZOO.js?v=d58f0536:19137
renderRootSync @ chunk-BVI7NZOO.js?v=d58f0536:19116
recoverFromConcurrentError @ chunk-BVI7NZOO.js?v=d58f0536:18736
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18684
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
hook.js:608 The above error occurred in the <KnockoutPage> component:

    at KnockoutPage (http://localhost:5173/src/pages/KnockoutPage.jsx?t=1753727692521:27:32)
    at ProtectedRoute (http://localhost:5173/src/components/ProtectedRoute.jsx:21:42)
    at RenderedRoute (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:4088:5)
    at Routes (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:4558:5)
    at div
    at div
    at Router (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:4501:15)
    at BrowserRouter (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:5247:5)
    at App (http://localhost:5173/src/App.jsx?t=1753727692521:34:37)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.
overrideMethod @ hook.js:608
logCapturedError @ chunk-BVI7NZOO.js?v=d58f0536:14032
update.callback @ chunk-BVI7NZOO.js?v=d58f0536:14052
callCallback @ chunk-BVI7NZOO.js?v=d58f0536:11248
commitUpdateQueue @ chunk-BVI7NZOO.js?v=d58f0536:11265
commitLayoutEffectOnFiber @ chunk-BVI7NZOO.js?v=d58f0536:17093
commitLayoutMountEffects_complete @ chunk-BVI7NZOO.js?v=d58f0536:17980
commitLayoutEffects_begin @ chunk-BVI7NZOO.js?v=d58f0536:17969
commitLayoutEffects @ chunk-BVI7NZOO.js?v=d58f0536:17920
commitRootImpl @ chunk-BVI7NZOO.js?v=d58f0536:19353
commitRoot @ chunk-BVI7NZOO.js?v=d58f0536:19277
finishConcurrentRender @ chunk-BVI7NZOO.js?v=d58f0536:18760
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18718
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
chunk-BVI7NZOO.js?v=d58f0536:11678 Uncaught Error: Rendered more hooks than during the previous render.
    at updateWorkInProgressHook (chunk-BVI7NZOO.js?v=d58f0536:11678:21)
    at updateCallback (chunk-BVI7NZOO.js?v=d58f0536:12177:22)
    at Object.useCallback (chunk-BVI7NZOO.js?v=d58f0536:12693:22)
    at useCallback (chunk-4HAMFFQC.js?v=d58f0536:1090:29)
    at KnockoutPage (KnockoutPage.jsx?t=1753727692521:616:29)
    at renderWithHooks (chunk-BVI7NZOO.js?v=d58f0536:11548:26)
    at updateFunctionComponent (chunk-BVI7NZOO.js?v=d58f0536:14582:28)
    at beginWork (chunk-BVI7NZOO.js?v=d58f0536:15924:22)
    at beginWork$1 (chunk-BVI7NZOO.js?v=d58f0536:19753:22)
    at performUnitOfWork (chunk-BVI7NZOO.js?v=d58f0536:19198:20)
updateWorkInProgressHook @ chunk-BVI7NZOO.js?v=d58f0536:11678
updateCallback @ chunk-BVI7NZOO.js?v=d58f0536:12177
useCallback @ chunk-BVI7NZOO.js?v=d58f0536:12693
useCallback @ chunk-4HAMFFQC.js?v=d58f0536:1090
KnockoutPage @ KnockoutPage.jsx?t=1753727692521:616
renderWithHooks @ chunk-BVI7NZOO.js?v=d58f0536:11548
updateFunctionComponent @ chunk-BVI7NZOO.js?v=d58f0536:14582
beginWork @ chunk-BVI7NZOO.js?v=d58f0536:15924
beginWork$1 @ chunk-BVI7NZOO.js?v=d58f0536:19753
performUnitOfWork @ chunk-BVI7NZOO.js?v=d58f0536:19198
workLoopSync @ chunk-BVI7NZOO.js?v=d58f0536:19137
renderRootSync @ chunk-BVI7NZOO.js?v=d58f0536:19116
recoverFromConcurrentError @ chunk-BVI7NZOO.js?v=d58f0536:18736
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18684
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
index.mjs:6921 modal.ts injected
index.mjs:2365 [bg:index]: Hello World
useAuth.js:47  POST https://firestore.googleapis.com/google.firestore.v1.Firestore/Write/channel?VER=8&database=projects%2Ftournament-manager-a4d0f%2Fdatabases%2F(default)&gsessionid=OoV4cju64MUzpuggwmkI3lF-V8l88fbbEeMqdo1sifI&SID=G_X7g6Ot9UByReOKO4N2CQ&RID=81238&TYPE=terminate&zx=sc2dan4av1ub net::ERR_BLOCKED_BY_CLIENT
gc @ firebase_firestore.js?v=d58f0536:2141
Y2.close @ firebase_firestore.js?v=d58f0536:2485
To @ firebase_firestore.js?v=d58f0536:12253
close @ firebase_firestore.js?v=d58f0536:12093
close @ firebase_firestore.js?v=d58f0536:12485
__ @ firebase_firestore.js?v=d58f0536:12443
(anonymous) @ firebase_firestore.js?v=d58f0536:12434
(anonymous) @ firebase_firestore.js?v=d58f0536:13135
(anonymous) @ firebase_firestore.js?v=d58f0536:15549
(anonymous) @ firebase_firestore.js?v=d58f0536:15580
Promise.then
gu @ firebase_firestore.js?v=d58f0536:15580
enqueue @ firebase_firestore.js?v=d58f0536:15549
enqueueAndForget @ firebase_firestore.js?v=d58f0536:15531
handleDelayElapsed @ firebase_firestore.js?v=d58f0536:13135
(anonymous) @ firebase_firestore.js?v=d58f0536:13115
setTimeout
start @ firebase_firestore.js?v=d58f0536:13115
createAndSchedule @ firebase_firestore.js?v=d58f0536:13108
enqueueAfterDelay @ firebase_firestore.js?v=d58f0536:15601
o_ @ firebase_firestore.js?v=d58f0536:12434
__PRIVATE_fillWritePipeline @ firebase_firestore.js?v=d58f0536:12968
await in __PRIVATE_fillWritePipeline
__PRIVATE_onMutationResult @ firebase_firestore.js?v=d58f0536:13002
await in __PRIVATE_onMutationResult
onNext @ firebase_firestore.js?v=d58f0536:12632
(anonymous) @ firebase_firestore.js?v=d58f0536:12520
(anonymous) @ firebase_firestore.js?v=d58f0536:12540
(anonymous) @ firebase_firestore.js?v=d58f0536:15549
(anonymous) @ firebase_firestore.js?v=d58f0536:15580
Promise.then
gu @ firebase_firestore.js?v=d58f0536:15580
enqueue @ firebase_firestore.js?v=d58f0536:15549
enqueueAndForget @ firebase_firestore.js?v=d58f0536:15531
(anonymous) @ firebase_firestore.js?v=d58f0536:12540
(anonymous) @ firebase_firestore.js?v=d58f0536:12520
bo @ firebase_firestore.js?v=d58f0536:12108
(anonymous) @ firebase_firestore.js?v=d58f0536:12294
(anonymous) @ firebase_firestore.js?v=d58f0536:12257
ab @ firebase_firestore.js?v=d58f0536:944
F2 @ firebase_firestore.js?v=d58f0536:914
Z2.ta @ firebase_firestore.js?v=d58f0536:2534
Rb @ firebase_firestore.js?v=d58f0536:1413
M2.Y @ firebase_firestore.js?v=d58f0536:1278
M2.ca @ firebase_firestore.js?v=d58f0536:1209
ab @ firebase_firestore.js?v=d58f0536:944
F2 @ firebase_firestore.js?v=d58f0536:914
Wc @ firebase_firestore.js?v=d58f0536:1948
h.bb @ firebase_firestore.js?v=d58f0536:1943
h.Ea @ firebase_firestore.js?v=d58f0536:1940
Lc @ firebase_firestore.js?v=d58f0536:1840
h.Pa @ firebase_firestore.js?v=d58f0536:1807
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Pa @ firebase_firestore.js?v=d58f0536:1808
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Pa @ firebase_firestore.js?v=d58f0536:1808
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Pa @ firebase_firestore.js?v=d58f0536:1808
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Pa @ firebase_firestore.js?v=d58f0536:1808
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Sa @ firebase_firestore.js?v=d58f0536:1794
Promise.then
h.send @ firebase_firestore.js?v=d58f0536:1775
h.ea @ firebase_firestore.js?v=d58f0536:1916
Jb @ firebase_firestore.js?v=d58f0536:1202
fd @ firebase_firestore.js?v=d58f0536:2335
h.Fa @ firebase_firestore.js?v=d58f0536:2302
Da @ firebase_firestore.js?v=d58f0536:663
Promise.then
x2 @ firebase_firestore.js?v=d58f0536:657
ec @ firebase_firestore.js?v=d58f0536:2288
Rb @ firebase_firestore.js?v=d58f0536:1410
M2.Y @ firebase_firestore.js?v=d58f0536:1278
M2.ca @ firebase_firestore.js?v=d58f0536:1209
ab @ firebase_firestore.js?v=d58f0536:944
F2 @ firebase_firestore.js?v=d58f0536:914
Wc @ firebase_firestore.js?v=d58f0536:1948
h.bb @ firebase_firestore.js?v=d58f0536:1943
h.Ea @ firebase_firestore.js?v=d58f0536:1940
Lc @ firebase_firestore.js?v=d58f0536:1840
h.Pa @ firebase_firestore.js?v=d58f0536:1807
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Sa @ firebase_firestore.js?v=d58f0536:1794
Promise.then
h.send @ firebase_firestore.js?v=d58f0536:1775
h.ea @ firebase_firestore.js?v=d58f0536:1916
Jb @ firebase_firestore.js?v=d58f0536:1197
Hb @ firebase_firestore.js?v=d58f0536:1172
h.Ga @ firebase_firestore.js?v=d58f0536:2222
Da @ firebase_firestore.js?v=d58f0536:663
Promise.then
x2 @ firebase_firestore.js?v=d58f0536:657
fc @ firebase_firestore.js?v=d58f0536:2166
h.connect @ firebase_firestore.js?v=d58f0536:2126
Y2.m @ firebase_firestore.js?v=d58f0536:2482
Io @ firebase_firestore.js?v=d58f0536:12251
send @ firebase_firestore.js?v=d58f0536:12096
a_ @ firebase_firestore.js?v=d58f0536:12438
p_ @ firebase_firestore.js?v=d58f0536:12641
__PRIVATE_onWriteStreamOpen @ firebase_firestore.js?v=d58f0536:12992
(anonymous) @ firebase_firestore.js?v=d58f0536:12516
(anonymous) @ firebase_firestore.js?v=d58f0536:12540
(anonymous) @ firebase_firestore.js?v=d58f0536:15549
(anonymous) @ firebase_firestore.js?v=d58f0536:15580
Promise.then
gu @ firebase_firestore.js?v=d58f0536:15580
enqueue @ firebase_firestore.js?v=d58f0536:15549
enqueueAndForget @ firebase_firestore.js?v=d58f0536:15531
(anonymous) @ firebase_firestore.js?v=d58f0536:12540
(anonymous) @ firebase_firestore.js?v=d58f0536:12516
wo @ firebase_firestore.js?v=d58f0536:12102
(anonymous) @ firebase_firestore.js?v=d58f0536:12299
setTimeout
Bo @ firebase_firestore.js?v=d58f0536:12298
T_ @ firebase_firestore.js?v=d58f0536:12620
P_ @ firebase_firestore.js?v=d58f0536:12513
(anonymous) @ firebase_firestore.js?v=d58f0536:12503
Promise.then
auth @ firebase_firestore.js?v=d58f0536:12499
start @ firebase_firestore.js?v=d58f0536:12398
start @ firebase_firestore.js?v=d58f0536:12614
__PRIVATE_startWriteStream @ firebase_firestore.js?v=d58f0536:12989
__PRIVATE_fillWritePipeline @ firebase_firestore.js?v=d58f0536:12975
await in __PRIVATE_fillWritePipeline
__PRIVATE_syncEngineWrite @ firebase_firestore.js?v=d58f0536:13971
await in __PRIVATE_syncEngineWrite
(anonymous) @ firebase_firestore.js?v=d58f0536:17306
await in (anonymous)
(anonymous) @ firebase_firestore.js?v=d58f0536:15549
(anonymous) @ firebase_firestore.js?v=d58f0536:15580
Promise.then
gu @ firebase_firestore.js?v=d58f0536:15580
enqueue @ firebase_firestore.js?v=d58f0536:15549
enqueueAndForget @ firebase_firestore.js?v=d58f0536:15531
__PRIVATE_firestoreClientWrite @ firebase_firestore.js?v=d58f0536:17306
executeWrite @ firebase_firestore.js?v=d58f0536:17307
setDoc @ firebase_firestore.js?v=d58f0536:17237
(anonymous) @ useAuth.js:47
(anonymous) @ firebase_auth.js?v=d58f0536:2687
Promise.then
registerStateListener @ firebase_auth.js?v=d58f0536:2683
onAuthStateChanged @ firebase_auth.js?v=d58f0536:2543
onAuthStateChanged @ firebase_auth.js?v=d58f0536:4794
(anonymous) @ useAuth.js:38
commitHookEffectListMount @ chunk-BVI7NZOO.js?v=d58f0536:16915
invokePassiveEffectMountInDEV @ chunk-BVI7NZOO.js?v=d58f0536:18324
invokeEffectsInDev @ chunk-BVI7NZOO.js?v=d58f0536:19701
commitDoubleInvokeEffectsInDEV @ chunk-BVI7NZOO.js?v=d58f0536:19686
flushPassiveEffectsImpl @ chunk-BVI7NZOO.js?v=d58f0536:19503
flushPassiveEffects @ chunk-BVI7NZOO.js?v=d58f0536:19447
(anonymous) @ chunk-BVI7NZOO.js?v=d58f0536:19328
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
chunk-BVI7NZOO.js?v=d58f0536:11678 Uncaught Error: Rendered more hooks than during the previous render.
    at updateWorkInProgressHook (chunk-BVI7NZOO.js?v=d58f0536:11678:21)
    at updateCallback (chunk-BVI7NZOO.js?v=d58f0536:12177:22)
    at Object.useCallback (chunk-BVI7NZOO.js?v=d58f0536:12693:22)
    at useCallback (chunk-4HAMFFQC.js?v=d58f0536:1090:29)
    at KnockoutPage (KnockoutPage.jsx?t=1753727802102:616:29)
    at renderWithHooks (chunk-BVI7NZOO.js?v=d58f0536:11548:26)
    at updateFunctionComponent (chunk-BVI7NZOO.js?v=d58f0536:14582:28)
    at beginWork (chunk-BVI7NZOO.js?v=d58f0536:15924:22)
    at HTMLUnknownElement.callCallback2 (chunk-BVI7NZOO.js?v=d58f0536:3674:22)
    at Object.invokeGuardedCallbackDev (chunk-BVI7NZOO.js?v=d58f0536:3699:24)
updateWorkInProgressHook @ chunk-BVI7NZOO.js?v=d58f0536:11678
updateCallback @ chunk-BVI7NZOO.js?v=d58f0536:12177
useCallback @ chunk-BVI7NZOO.js?v=d58f0536:12693
useCallback @ chunk-4HAMFFQC.js?v=d58f0536:1090
KnockoutPage @ KnockoutPage.jsx?t=1753727802102:616
renderWithHooks @ chunk-BVI7NZOO.js?v=d58f0536:11548
updateFunctionComponent @ chunk-BVI7NZOO.js?v=d58f0536:14582
beginWork @ chunk-BVI7NZOO.js?v=d58f0536:15924
callCallback2 @ chunk-BVI7NZOO.js?v=d58f0536:3674
invokeGuardedCallbackDev @ chunk-BVI7NZOO.js?v=d58f0536:3699
invokeGuardedCallback @ chunk-BVI7NZOO.js?v=d58f0536:3733
beginWork$1 @ chunk-BVI7NZOO.js?v=d58f0536:19765
performUnitOfWork @ chunk-BVI7NZOO.js?v=d58f0536:19198
workLoopSync @ chunk-BVI7NZOO.js?v=d58f0536:19137
renderRootSync @ chunk-BVI7NZOO.js?v=d58f0536:19116
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18678
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
chunk-BVI7NZOO.js?v=d58f0536:11678 Uncaught Error: Rendered more hooks than during the previous render.
    at updateWorkInProgressHook (chunk-BVI7NZOO.js?v=d58f0536:11678:21)
    at updateCallback (chunk-BVI7NZOO.js?v=d58f0536:12177:22)
    at Object.useCallback (chunk-BVI7NZOO.js?v=d58f0536:12693:22)
    at useCallback (chunk-4HAMFFQC.js?v=d58f0536:1090:29)
    at KnockoutPage (KnockoutPage.jsx?t=1753727802102:616:29)
    at renderWithHooks (chunk-BVI7NZOO.js?v=d58f0536:11548:26)
    at updateFunctionComponent (chunk-BVI7NZOO.js?v=d58f0536:14582:28)
    at beginWork (chunk-BVI7NZOO.js?v=d58f0536:15924:22)
    at HTMLUnknownElement.callCallback2 (chunk-BVI7NZOO.js?v=d58f0536:3674:22)
    at Object.invokeGuardedCallbackDev (chunk-BVI7NZOO.js?v=d58f0536:3699:24)
updateWorkInProgressHook @ chunk-BVI7NZOO.js?v=d58f0536:11678
updateCallback @ chunk-BVI7NZOO.js?v=d58f0536:12177
useCallback @ chunk-BVI7NZOO.js?v=d58f0536:12693
useCallback @ chunk-4HAMFFQC.js?v=d58f0536:1090
KnockoutPage @ KnockoutPage.jsx?t=1753727802102:616
renderWithHooks @ chunk-BVI7NZOO.js?v=d58f0536:11548
updateFunctionComponent @ chunk-BVI7NZOO.js?v=d58f0536:14582
beginWork @ chunk-BVI7NZOO.js?v=d58f0536:15924
callCallback2 @ chunk-BVI7NZOO.js?v=d58f0536:3674
invokeGuardedCallbackDev @ chunk-BVI7NZOO.js?v=d58f0536:3699
invokeGuardedCallback @ chunk-BVI7NZOO.js?v=d58f0536:3733
beginWork$1 @ chunk-BVI7NZOO.js?v=d58f0536:19765
performUnitOfWork @ chunk-BVI7NZOO.js?v=d58f0536:19198
workLoopSync @ chunk-BVI7NZOO.js?v=d58f0536:19137
renderRootSync @ chunk-BVI7NZOO.js?v=d58f0536:19116
recoverFromConcurrentError @ chunk-BVI7NZOO.js?v=d58f0536:18736
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18684
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
hook.js:608 The above error occurred in the <KnockoutPage> component:

    at KnockoutPage (http://localhost:5173/src/pages/KnockoutPage.jsx?t=1753727802102:27:32)
    at ProtectedRoute (http://localhost:5173/src/components/ProtectedRoute.jsx:21:42)
    at RenderedRoute (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:4088:5)
    at Routes (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:4558:5)
    at div
    at div
    at Router (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:4501:15)
    at BrowserRouter (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:5247:5)
    at App (http://localhost:5173/src/App.jsx?t=1753727692521:34:37)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.
overrideMethod @ hook.js:608
logCapturedError @ chunk-BVI7NZOO.js?v=d58f0536:14032
update.callback @ chunk-BVI7NZOO.js?v=d58f0536:14052
callCallback @ chunk-BVI7NZOO.js?v=d58f0536:11248
commitUpdateQueue @ chunk-BVI7NZOO.js?v=d58f0536:11265
commitLayoutEffectOnFiber @ chunk-BVI7NZOO.js?v=d58f0536:17093
commitLayoutMountEffects_complete @ chunk-BVI7NZOO.js?v=d58f0536:17980
commitLayoutEffects_begin @ chunk-BVI7NZOO.js?v=d58f0536:17969
commitLayoutEffects @ chunk-BVI7NZOO.js?v=d58f0536:17920
commitRootImpl @ chunk-BVI7NZOO.js?v=d58f0536:19353
commitRoot @ chunk-BVI7NZOO.js?v=d58f0536:19277
finishConcurrentRender @ chunk-BVI7NZOO.js?v=d58f0536:18760
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18718
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
chunk-BVI7NZOO.js?v=d58f0536:11678 Uncaught Error: Rendered more hooks than during the previous render.
    at updateWorkInProgressHook (chunk-BVI7NZOO.js?v=d58f0536:11678:21)
    at updateCallback (chunk-BVI7NZOO.js?v=d58f0536:12177:22)
    at Object.useCallback (chunk-BVI7NZOO.js?v=d58f0536:12693:22)
    at useCallback (chunk-4HAMFFQC.js?v=d58f0536:1090:29)
    at KnockoutPage (KnockoutPage.jsx?t=1753727802102:616:29)
    at renderWithHooks (chunk-BVI7NZOO.js?v=d58f0536:11548:26)
    at updateFunctionComponent (chunk-BVI7NZOO.js?v=d58f0536:14582:28)
    at beginWork (chunk-BVI7NZOO.js?v=d58f0536:15924:22)
    at beginWork$1 (chunk-BVI7NZOO.js?v=d58f0536:19753:22)
    at performUnitOfWork (chunk-BVI7NZOO.js?v=d58f0536:19198:20)
updateWorkInProgressHook @ chunk-BVI7NZOO.js?v=d58f0536:11678
updateCallback @ chunk-BVI7NZOO.js?v=d58f0536:12177
useCallback @ chunk-BVI7NZOO.js?v=d58f0536:12693
useCallback @ chunk-4HAMFFQC.js?v=d58f0536:1090
KnockoutPage @ KnockoutPage.jsx?t=1753727802102:616
renderWithHooks @ chunk-BVI7NZOO.js?v=d58f0536:11548
updateFunctionComponent @ chunk-BVI7NZOO.js?v=d58f0536:14582
beginWork @ chunk-BVI7NZOO.js?v=d58f0536:15924
beginWork$1 @ chunk-BVI7NZOO.js?v=d58f0536:19753
performUnitOfWork @ chunk-BVI7NZOO.js?v=d58f0536:19198
workLoopSync @ chunk-BVI7NZOO.js?v=d58f0536:19137
renderRootSync @ chunk-BVI7NZOO.js?v=d58f0536:19116
recoverFromConcurrentError @ chunk-BVI7NZOO.js?v=d58f0536:18736
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18684
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
useAuth.js:47  POST https://firestore.googleapis.com/google.firestore.v1.Firestore/Write/channel?VER=8&database=projects%2Ftournament-manager-a4d0f%2Fdatabases%2F(default)&gsessionid=j8rjIjBf-WuClxYxgMnQw4MrHArvt9kVBOPLoraTE60&SID=l2BMFs25AUk3CJX6Eu1BPQ&RID=45136&TYPE=terminate&zx=243jp6sba2km net::ERR_BLOCKED_BY_CLIENT
gc @ firebase_firestore.js?v=d58f0536:2141
Y2.close @ firebase_firestore.js?v=d58f0536:2485
To @ firebase_firestore.js?v=d58f0536:12253
close @ firebase_firestore.js?v=d58f0536:12093
close @ firebase_firestore.js?v=d58f0536:12485
__ @ firebase_firestore.js?v=d58f0536:12443
(anonymous) @ firebase_firestore.js?v=d58f0536:12434
(anonymous) @ firebase_firestore.js?v=d58f0536:13135
(anonymous) @ firebase_firestore.js?v=d58f0536:15549
(anonymous) @ firebase_firestore.js?v=d58f0536:15580
Promise.then
gu @ firebase_firestore.js?v=d58f0536:15580
enqueue @ firebase_firestore.js?v=d58f0536:15549
enqueueAndForget @ firebase_firestore.js?v=d58f0536:15531
handleDelayElapsed @ firebase_firestore.js?v=d58f0536:13135
(anonymous) @ firebase_firestore.js?v=d58f0536:13115
setTimeout
start @ firebase_firestore.js?v=d58f0536:13115
createAndSchedule @ firebase_firestore.js?v=d58f0536:13108
enqueueAfterDelay @ firebase_firestore.js?v=d58f0536:15601
o_ @ firebase_firestore.js?v=d58f0536:12434
__PRIVATE_fillWritePipeline @ firebase_firestore.js?v=d58f0536:12968
await in __PRIVATE_fillWritePipeline
__PRIVATE_onMutationResult @ firebase_firestore.js?v=d58f0536:13002
await in __PRIVATE_onMutationResult
onNext @ firebase_firestore.js?v=d58f0536:12632
(anonymous) @ firebase_firestore.js?v=d58f0536:12520
(anonymous) @ firebase_firestore.js?v=d58f0536:12540
(anonymous) @ firebase_firestore.js?v=d58f0536:15549
(anonymous) @ firebase_firestore.js?v=d58f0536:15580
Promise.then
gu @ firebase_firestore.js?v=d58f0536:15580
enqueue @ firebase_firestore.js?v=d58f0536:15549
enqueueAndForget @ firebase_firestore.js?v=d58f0536:15531
(anonymous) @ firebase_firestore.js?v=d58f0536:12540
(anonymous) @ firebase_firestore.js?v=d58f0536:12520
bo @ firebase_firestore.js?v=d58f0536:12108
(anonymous) @ firebase_firestore.js?v=d58f0536:12294
(anonymous) @ firebase_firestore.js?v=d58f0536:12257
ab @ firebase_firestore.js?v=d58f0536:944
F2 @ firebase_firestore.js?v=d58f0536:914
Z2.ta @ firebase_firestore.js?v=d58f0536:2534
Rb @ firebase_firestore.js?v=d58f0536:1413
M2.Y @ firebase_firestore.js?v=d58f0536:1278
M2.ca @ firebase_firestore.js?v=d58f0536:1209
ab @ firebase_firestore.js?v=d58f0536:944
F2 @ firebase_firestore.js?v=d58f0536:914
Wc @ firebase_firestore.js?v=d58f0536:1948
h.bb @ firebase_firestore.js?v=d58f0536:1943
h.Ea @ firebase_firestore.js?v=d58f0536:1940
Lc @ firebase_firestore.js?v=d58f0536:1840
h.Pa @ firebase_firestore.js?v=d58f0536:1807
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Pa @ firebase_firestore.js?v=d58f0536:1808
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Pa @ firebase_firestore.js?v=d58f0536:1808
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Pa @ firebase_firestore.js?v=d58f0536:1808
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Pa @ firebase_firestore.js?v=d58f0536:1808
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Sa @ firebase_firestore.js?v=d58f0536:1794
Promise.then
h.send @ firebase_firestore.js?v=d58f0536:1775
h.ea @ firebase_firestore.js?v=d58f0536:1916
Jb @ firebase_firestore.js?v=d58f0536:1202
fd @ firebase_firestore.js?v=d58f0536:2335
h.Fa @ firebase_firestore.js?v=d58f0536:2302
Da @ firebase_firestore.js?v=d58f0536:663
Promise.then
x2 @ firebase_firestore.js?v=d58f0536:657
ec @ firebase_firestore.js?v=d58f0536:2288
Rb @ firebase_firestore.js?v=d58f0536:1410
M2.Y @ firebase_firestore.js?v=d58f0536:1278
M2.ca @ firebase_firestore.js?v=d58f0536:1209
ab @ firebase_firestore.js?v=d58f0536:944
F2 @ firebase_firestore.js?v=d58f0536:914
Wc @ firebase_firestore.js?v=d58f0536:1948
h.bb @ firebase_firestore.js?v=d58f0536:1943
h.Ea @ firebase_firestore.js?v=d58f0536:1940
Lc @ firebase_firestore.js?v=d58f0536:1840
h.Pa @ firebase_firestore.js?v=d58f0536:1807
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Sa @ firebase_firestore.js?v=d58f0536:1794
Promise.then
h.send @ firebase_firestore.js?v=d58f0536:1775
h.ea @ firebase_firestore.js?v=d58f0536:1916
Jb @ firebase_firestore.js?v=d58f0536:1197
Hb @ firebase_firestore.js?v=d58f0536:1172
h.Ga @ firebase_firestore.js?v=d58f0536:2222
Da @ firebase_firestore.js?v=d58f0536:663
Promise.then
x2 @ firebase_firestore.js?v=d58f0536:657
fc @ firebase_firestore.js?v=d58f0536:2166
h.connect @ firebase_firestore.js?v=d58f0536:2126
Y2.m @ firebase_firestore.js?v=d58f0536:2482
Io @ firebase_firestore.js?v=d58f0536:12251
send @ firebase_firestore.js?v=d58f0536:12096
a_ @ firebase_firestore.js?v=d58f0536:12438
p_ @ firebase_firestore.js?v=d58f0536:12641
__PRIVATE_onWriteStreamOpen @ firebase_firestore.js?v=d58f0536:12992
(anonymous) @ firebase_firestore.js?v=d58f0536:12516
(anonymous) @ firebase_firestore.js?v=d58f0536:12540
(anonymous) @ firebase_firestore.js?v=d58f0536:15549
(anonymous) @ firebase_firestore.js?v=d58f0536:15580
Promise.then
gu @ firebase_firestore.js?v=d58f0536:15580
enqueue @ firebase_firestore.js?v=d58f0536:15549
enqueueAndForget @ firebase_firestore.js?v=d58f0536:15531
(anonymous) @ firebase_firestore.js?v=d58f0536:12540
(anonymous) @ firebase_firestore.js?v=d58f0536:12516
wo @ firebase_firestore.js?v=d58f0536:12102
(anonymous) @ firebase_firestore.js?v=d58f0536:12299
setTimeout
Bo @ firebase_firestore.js?v=d58f0536:12298
T_ @ firebase_firestore.js?v=d58f0536:12620
P_ @ firebase_firestore.js?v=d58f0536:12513
(anonymous) @ firebase_firestore.js?v=d58f0536:12503
Promise.then
auth @ firebase_firestore.js?v=d58f0536:12499
start @ firebase_firestore.js?v=d58f0536:12398
start @ firebase_firestore.js?v=d58f0536:12614
__PRIVATE_startWriteStream @ firebase_firestore.js?v=d58f0536:12989
__PRIVATE_fillWritePipeline @ firebase_firestore.js?v=d58f0536:12975
await in __PRIVATE_fillWritePipeline
__PRIVATE_syncEngineWrite @ firebase_firestore.js?v=d58f0536:13971
await in __PRIVATE_syncEngineWrite
(anonymous) @ firebase_firestore.js?v=d58f0536:17306
await in (anonymous)
(anonymous) @ firebase_firestore.js?v=d58f0536:15549
(anonymous) @ firebase_firestore.js?v=d58f0536:15580
Promise.then
gu @ firebase_firestore.js?v=d58f0536:15580
enqueue @ firebase_firestore.js?v=d58f0536:15549
enqueueAndForget @ firebase_firestore.js?v=d58f0536:15531
__PRIVATE_firestoreClientWrite @ firebase_firestore.js?v=d58f0536:17306
executeWrite @ firebase_firestore.js?v=d58f0536:17307
setDoc @ firebase_firestore.js?v=d58f0536:17237
(anonymous) @ useAuth.js:47
(anonymous) @ firebase_auth.js?v=d58f0536:2687
Promise.then
registerStateListener @ firebase_auth.js?v=d58f0536:2683
onAuthStateChanged @ firebase_auth.js?v=d58f0536:2543
onAuthStateChanged @ firebase_auth.js?v=d58f0536:4794
(anonymous) @ useAuth.js:38
commitHookEffectListMount @ chunk-BVI7NZOO.js?v=d58f0536:16915
invokePassiveEffectMountInDEV @ chunk-BVI7NZOO.js?v=d58f0536:18324
invokeEffectsInDev @ chunk-BVI7NZOO.js?v=d58f0536:19701
commitDoubleInvokeEffectsInDEV @ chunk-BVI7NZOO.js?v=d58f0536:19686
flushPassiveEffectsImpl @ chunk-BVI7NZOO.js?v=d58f0536:19503
flushPassiveEffects @ chunk-BVI7NZOO.js?v=d58f0536:19447
commitRootImpl @ chunk-BVI7NZOO.js?v=d58f0536:19416
commitRoot @ chunk-BVI7NZOO.js?v=d58f0536:19277
performSyncWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18895
flushSyncCallbacks @ chunk-BVI7NZOO.js?v=d58f0536:9119
flushSync @ chunk-BVI7NZOO.js?v=d58f0536:18959
scheduleRoot @ chunk-BVI7NZOO.js?v=d58f0536:20015
(anonymous) @ @react-refresh:208
performReactRefresh @ @react-refresh:190
(anonymous) @ @react-refresh:586
setTimeout
(anonymous) @ @react-refresh:576
validateRefreshBoundaryAndEnqueueUpdate @ @react-refresh:625
(anonymous) @ KnockoutPage.jsx?t=1753727692521:1160
(anonymous) @ client:34
(anonymous) @ client:218
(anonymous) @ client:193
queueUpdate @ client:193
await in queueUpdate
(anonymous) @ client:642
handleMessage @ client:640
(anonymous) @ client:550
client:602  GET http://localhost:5173/src/pages/KnockoutPage.jsx?t=1753727866194 net::ERR_ABORTED 500 (Internal Server Error)
importUpdatedModule @ client:602
fetchUpdate @ client:211
queueUpdate @ client:186
(anonymous) @ client:642
handleMessage @ client:640
(anonymous) @ client:550
client:176 [hmr] Failed to reload /src/pages/KnockoutPage.jsx. This could be due to syntax errors or importing non-existent modules. (see errors above)
overrideMethod @ hook.js:608
warnFailedUpdate @ client:176
fetchUpdate @ client:213
await in fetchUpdate
queueUpdate @ client:186
(anonymous) @ client:642
handleMessage @ client:640
(anonymous) @ client:550
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
chunk-BVI7NZOO.js?v=d58f0536:11678 Uncaught Error: Rendered more hooks than during the previous render.
    at updateWorkInProgressHook (chunk-BVI7NZOO.js?v=d58f0536:11678:21)
    at updateCallback (chunk-BVI7NZOO.js?v=d58f0536:12177:22)
    at Object.useCallback (chunk-BVI7NZOO.js?v=d58f0536:12693:22)
    at useCallback (chunk-4HAMFFQC.js?v=d58f0536:1090:29)
    at KnockoutPage (KnockoutPage.jsx?t=1753727865151:608:29)
    at renderWithHooks (chunk-BVI7NZOO.js?v=d58f0536:11548:26)
    at updateFunctionComponent (chunk-BVI7NZOO.js?v=d58f0536:14582:28)
    at beginWork (chunk-BVI7NZOO.js?v=d58f0536:15924:22)
    at HTMLUnknownElement.callCallback2 (chunk-BVI7NZOO.js?v=d58f0536:3674:22)
    at Object.invokeGuardedCallbackDev (chunk-BVI7NZOO.js?v=d58f0536:3699:24)
updateWorkInProgressHook @ chunk-BVI7NZOO.js?v=d58f0536:11678
updateCallback @ chunk-BVI7NZOO.js?v=d58f0536:12177
useCallback @ chunk-BVI7NZOO.js?v=d58f0536:12693
useCallback @ chunk-4HAMFFQC.js?v=d58f0536:1090
KnockoutPage @ KnockoutPage.jsx?t=1753727865151:608
renderWithHooks @ chunk-BVI7NZOO.js?v=d58f0536:11548
updateFunctionComponent @ chunk-BVI7NZOO.js?v=d58f0536:14582
beginWork @ chunk-BVI7NZOO.js?v=d58f0536:15924
callCallback2 @ chunk-BVI7NZOO.js?v=d58f0536:3674
invokeGuardedCallbackDev @ chunk-BVI7NZOO.js?v=d58f0536:3699
invokeGuardedCallback @ chunk-BVI7NZOO.js?v=d58f0536:3733
beginWork$1 @ chunk-BVI7NZOO.js?v=d58f0536:19765
performUnitOfWork @ chunk-BVI7NZOO.js?v=d58f0536:19198
workLoopSync @ chunk-BVI7NZOO.js?v=d58f0536:19137
renderRootSync @ chunk-BVI7NZOO.js?v=d58f0536:19116
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18678
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
chunk-BVI7NZOO.js?v=d58f0536:11678 Uncaught Error: Rendered more hooks than during the previous render.
    at updateWorkInProgressHook (chunk-BVI7NZOO.js?v=d58f0536:11678:21)
    at updateCallback (chunk-BVI7NZOO.js?v=d58f0536:12177:22)
    at Object.useCallback (chunk-BVI7NZOO.js?v=d58f0536:12693:22)
    at useCallback (chunk-4HAMFFQC.js?v=d58f0536:1090:29)
    at KnockoutPage (KnockoutPage.jsx?t=1753727865151:608:29)
    at renderWithHooks (chunk-BVI7NZOO.js?v=d58f0536:11548:26)
    at updateFunctionComponent (chunk-BVI7NZOO.js?v=d58f0536:14582:28)
    at beginWork (chunk-BVI7NZOO.js?v=d58f0536:15924:22)
    at HTMLUnknownElement.callCallback2 (chunk-BVI7NZOO.js?v=d58f0536:3674:22)
    at Object.invokeGuardedCallbackDev (chunk-BVI7NZOO.js?v=d58f0536:3699:24)
updateWorkInProgressHook @ chunk-BVI7NZOO.js?v=d58f0536:11678
updateCallback @ chunk-BVI7NZOO.js?v=d58f0536:12177
useCallback @ chunk-BVI7NZOO.js?v=d58f0536:12693
useCallback @ chunk-4HAMFFQC.js?v=d58f0536:1090
KnockoutPage @ KnockoutPage.jsx?t=1753727865151:608
renderWithHooks @ chunk-BVI7NZOO.js?v=d58f0536:11548
updateFunctionComponent @ chunk-BVI7NZOO.js?v=d58f0536:14582
beginWork @ chunk-BVI7NZOO.js?v=d58f0536:15924
callCallback2 @ chunk-BVI7NZOO.js?v=d58f0536:3674
invokeGuardedCallbackDev @ chunk-BVI7NZOO.js?v=d58f0536:3699
invokeGuardedCallback @ chunk-BVI7NZOO.js?v=d58f0536:3733
beginWork$1 @ chunk-BVI7NZOO.js?v=d58f0536:19765
performUnitOfWork @ chunk-BVI7NZOO.js?v=d58f0536:19198
workLoopSync @ chunk-BVI7NZOO.js?v=d58f0536:19137
renderRootSync @ chunk-BVI7NZOO.js?v=d58f0536:19116
recoverFromConcurrentError @ chunk-BVI7NZOO.js?v=d58f0536:18736
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18684
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
hook.js:608 The above error occurred in the <KnockoutPage> component:

    at KnockoutPage (http://localhost:5173/src/pages/KnockoutPage.jsx?t=1753727865151:27:32)
    at ProtectedRoute (http://localhost:5173/src/components/ProtectedRoute.jsx:21:42)
    at RenderedRoute (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:4088:5)
    at Routes (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:4558:5)
    at div
    at div
    at Router (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:4501:15)
    at BrowserRouter (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:5247:5)
    at App (http://localhost:5173/src/App.jsx?t=1753727692521:34:37)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.
overrideMethod @ hook.js:608
logCapturedError @ chunk-BVI7NZOO.js?v=d58f0536:14032
update.callback @ chunk-BVI7NZOO.js?v=d58f0536:14052
callCallback @ chunk-BVI7NZOO.js?v=d58f0536:11248
commitUpdateQueue @ chunk-BVI7NZOO.js?v=d58f0536:11265
commitLayoutEffectOnFiber @ chunk-BVI7NZOO.js?v=d58f0536:17093
commitLayoutMountEffects_complete @ chunk-BVI7NZOO.js?v=d58f0536:17980
commitLayoutEffects_begin @ chunk-BVI7NZOO.js?v=d58f0536:17969
commitLayoutEffects @ chunk-BVI7NZOO.js?v=d58f0536:17920
commitRootImpl @ chunk-BVI7NZOO.js?v=d58f0536:19353
commitRoot @ chunk-BVI7NZOO.js?v=d58f0536:19277
finishConcurrentRender @ chunk-BVI7NZOO.js?v=d58f0536:18760
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18718
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
chunk-BVI7NZOO.js?v=d58f0536:11678 Uncaught Error: Rendered more hooks than during the previous render.
    at updateWorkInProgressHook (chunk-BVI7NZOO.js?v=d58f0536:11678:21)
    at updateCallback (chunk-BVI7NZOO.js?v=d58f0536:12177:22)
    at Object.useCallback (chunk-BVI7NZOO.js?v=d58f0536:12693:22)
    at useCallback (chunk-4HAMFFQC.js?v=d58f0536:1090:29)
    at KnockoutPage (KnockoutPage.jsx?t=1753727865151:608:29)
    at renderWithHooks (chunk-BVI7NZOO.js?v=d58f0536:11548:26)
    at updateFunctionComponent (chunk-BVI7NZOO.js?v=d58f0536:14582:28)
    at beginWork (chunk-BVI7NZOO.js?v=d58f0536:15924:22)
    at beginWork$1 (chunk-BVI7NZOO.js?v=d58f0536:19753:22)
    at performUnitOfWork (chunk-BVI7NZOO.js?v=d58f0536:19198:20)
updateWorkInProgressHook @ chunk-BVI7NZOO.js?v=d58f0536:11678
updateCallback @ chunk-BVI7NZOO.js?v=d58f0536:12177
useCallback @ chunk-BVI7NZOO.js?v=d58f0536:12693
useCallback @ chunk-4HAMFFQC.js?v=d58f0536:1090
KnockoutPage @ KnockoutPage.jsx?t=1753727865151:608
renderWithHooks @ chunk-BVI7NZOO.js?v=d58f0536:11548
updateFunctionComponent @ chunk-BVI7NZOO.js?v=d58f0536:14582
beginWork @ chunk-BVI7NZOO.js?v=d58f0536:15924
beginWork$1 @ chunk-BVI7NZOO.js?v=d58f0536:19753
performUnitOfWork @ chunk-BVI7NZOO.js?v=d58f0536:19198
workLoopSync @ chunk-BVI7NZOO.js?v=d58f0536:19137
renderRootSync @ chunk-BVI7NZOO.js?v=d58f0536:19116
recoverFromConcurrentError @ chunk-BVI7NZOO.js?v=d58f0536:18736
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18684
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
chunk-BVI7NZOO.js?v=d58f0536:11678 Uncaught Error: Rendered more hooks than during the previous render.
    at updateWorkInProgressHook (chunk-BVI7NZOO.js?v=d58f0536:11678:21)
    at updateCallback (chunk-BVI7NZOO.js?v=d58f0536:12177:22)
    at Object.useCallback (chunk-BVI7NZOO.js?v=d58f0536:12693:22)
    at useCallback (chunk-4HAMFFQC.js?v=d58f0536:1090:29)
    at KnockoutPage (KnockoutPage.jsx?t=1753727874835:608:29)
    at renderWithHooks (chunk-BVI7NZOO.js?v=d58f0536:11548:26)
    at updateFunctionComponent (chunk-BVI7NZOO.js?v=d58f0536:14582:28)
    at beginWork (chunk-BVI7NZOO.js?v=d58f0536:15924:22)
    at HTMLUnknownElement.callCallback2 (chunk-BVI7NZOO.js?v=d58f0536:3674:22)
    at Object.invokeGuardedCallbackDev (chunk-BVI7NZOO.js?v=d58f0536:3699:24)
updateWorkInProgressHook @ chunk-BVI7NZOO.js?v=d58f0536:11678
updateCallback @ chunk-BVI7NZOO.js?v=d58f0536:12177
useCallback @ chunk-BVI7NZOO.js?v=d58f0536:12693
useCallback @ chunk-4HAMFFQC.js?v=d58f0536:1090
KnockoutPage @ KnockoutPage.jsx?t=1753727874835:608
renderWithHooks @ chunk-BVI7NZOO.js?v=d58f0536:11548
updateFunctionComponent @ chunk-BVI7NZOO.js?v=d58f0536:14582
beginWork @ chunk-BVI7NZOO.js?v=d58f0536:15924
callCallback2 @ chunk-BVI7NZOO.js?v=d58f0536:3674
invokeGuardedCallbackDev @ chunk-BVI7NZOO.js?v=d58f0536:3699
invokeGuardedCallback @ chunk-BVI7NZOO.js?v=d58f0536:3733
beginWork$1 @ chunk-BVI7NZOO.js?v=d58f0536:19765
performUnitOfWork @ chunk-BVI7NZOO.js?v=d58f0536:19198
workLoopSync @ chunk-BVI7NZOO.js?v=d58f0536:19137
renderRootSync @ chunk-BVI7NZOO.js?v=d58f0536:19116
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18678
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
chunk-BVI7NZOO.js?v=d58f0536:11678 Uncaught Error: Rendered more hooks than during the previous render.
    at updateWorkInProgressHook (chunk-BVI7NZOO.js?v=d58f0536:11678:21)
    at updateCallback (chunk-BVI7NZOO.js?v=d58f0536:12177:22)
    at Object.useCallback (chunk-BVI7NZOO.js?v=d58f0536:12693:22)
    at useCallback (chunk-4HAMFFQC.js?v=d58f0536:1090:29)
    at KnockoutPage (KnockoutPage.jsx?t=1753727874835:608:29)
    at renderWithHooks (chunk-BVI7NZOO.js?v=d58f0536:11548:26)
    at updateFunctionComponent (chunk-BVI7NZOO.js?v=d58f0536:14582:28)
    at beginWork (chunk-BVI7NZOO.js?v=d58f0536:15924:22)
    at HTMLUnknownElement.callCallback2 (chunk-BVI7NZOO.js?v=d58f0536:3674:22)
    at Object.invokeGuardedCallbackDev (chunk-BVI7NZOO.js?v=d58f0536:3699:24)
updateWorkInProgressHook @ chunk-BVI7NZOO.js?v=d58f0536:11678
updateCallback @ chunk-BVI7NZOO.js?v=d58f0536:12177
useCallback @ chunk-BVI7NZOO.js?v=d58f0536:12693
useCallback @ chunk-4HAMFFQC.js?v=d58f0536:1090
KnockoutPage @ KnockoutPage.jsx?t=1753727874835:608
renderWithHooks @ chunk-BVI7NZOO.js?v=d58f0536:11548
updateFunctionComponent @ chunk-BVI7NZOO.js?v=d58f0536:14582
beginWork @ chunk-BVI7NZOO.js?v=d58f0536:15924
callCallback2 @ chunk-BVI7NZOO.js?v=d58f0536:3674
invokeGuardedCallbackDev @ chunk-BVI7NZOO.js?v=d58f0536:3699
invokeGuardedCallback @ chunk-BVI7NZOO.js?v=d58f0536:3733
beginWork$1 @ chunk-BVI7NZOO.js?v=d58f0536:19765
performUnitOfWork @ chunk-BVI7NZOO.js?v=d58f0536:19198
workLoopSync @ chunk-BVI7NZOO.js?v=d58f0536:19137
renderRootSync @ chunk-BVI7NZOO.js?v=d58f0536:19116
recoverFromConcurrentError @ chunk-BVI7NZOO.js?v=d58f0536:18736
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18684
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
hook.js:608 The above error occurred in the <KnockoutPage> component:

    at KnockoutPage (http://localhost:5173/src/pages/KnockoutPage.jsx?t=1753727874835:27:32)
    at ProtectedRoute (http://localhost:5173/src/components/ProtectedRoute.jsx:21:42)
    at RenderedRoute (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:4088:5)
    at Routes (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:4558:5)
    at div
    at div
    at Router (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:4501:15)
    at BrowserRouter (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:5247:5)
    at App (http://localhost:5173/src/App.jsx?t=1753727692521:34:37)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.
overrideMethod @ hook.js:608
logCapturedError @ chunk-BVI7NZOO.js?v=d58f0536:14032
update.callback @ chunk-BVI7NZOO.js?v=d58f0536:14052
callCallback @ chunk-BVI7NZOO.js?v=d58f0536:11248
commitUpdateQueue @ chunk-BVI7NZOO.js?v=d58f0536:11265
commitLayoutEffectOnFiber @ chunk-BVI7NZOO.js?v=d58f0536:17093
commitLayoutMountEffects_complete @ chunk-BVI7NZOO.js?v=d58f0536:17980
commitLayoutEffects_begin @ chunk-BVI7NZOO.js?v=d58f0536:17969
commitLayoutEffects @ chunk-BVI7NZOO.js?v=d58f0536:17920
commitRootImpl @ chunk-BVI7NZOO.js?v=d58f0536:19353
commitRoot @ chunk-BVI7NZOO.js?v=d58f0536:19277
finishConcurrentRender @ chunk-BVI7NZOO.js?v=d58f0536:18760
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18718
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
chunk-BVI7NZOO.js?v=d58f0536:11678 Uncaught Error: Rendered more hooks than during the previous render.
    at updateWorkInProgressHook (chunk-BVI7NZOO.js?v=d58f0536:11678:21)
    at updateCallback (chunk-BVI7NZOO.js?v=d58f0536:12177:22)
    at Object.useCallback (chunk-BVI7NZOO.js?v=d58f0536:12693:22)
    at useCallback (chunk-4HAMFFQC.js?v=d58f0536:1090:29)
    at KnockoutPage (KnockoutPage.jsx?t=1753727874835:608:29)
    at renderWithHooks (chunk-BVI7NZOO.js?v=d58f0536:11548:26)
    at updateFunctionComponent (chunk-BVI7NZOO.js?v=d58f0536:14582:28)
    at beginWork (chunk-BVI7NZOO.js?v=d58f0536:15924:22)
    at beginWork$1 (chunk-BVI7NZOO.js?v=d58f0536:19753:22)
    at performUnitOfWork (chunk-BVI7NZOO.js?v=d58f0536:19198:20)
updateWorkInProgressHook @ chunk-BVI7NZOO.js?v=d58f0536:11678
updateCallback @ chunk-BVI7NZOO.js?v=d58f0536:12177
useCallback @ chunk-BVI7NZOO.js?v=d58f0536:12693
useCallback @ chunk-4HAMFFQC.js?v=d58f0536:1090
KnockoutPage @ KnockoutPage.jsx?t=1753727874835:608
renderWithHooks @ chunk-BVI7NZOO.js?v=d58f0536:11548
updateFunctionComponent @ chunk-BVI7NZOO.js?v=d58f0536:14582
beginWork @ chunk-BVI7NZOO.js?v=d58f0536:15924
beginWork$1 @ chunk-BVI7NZOO.js?v=d58f0536:19753
performUnitOfWork @ chunk-BVI7NZOO.js?v=d58f0536:19198
workLoopSync @ chunk-BVI7NZOO.js?v=d58f0536:19137
renderRootSync @ chunk-BVI7NZOO.js?v=d58f0536:19116
recoverFromConcurrentError @ chunk-BVI7NZOO.js?v=d58f0536:18736
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18684
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
useAuth.js:47  POST https://firestore.googleapis.com/google.firestore.v1.Firestore/Write/channel?VER=8&database=projects%2Ftournament-manager-a4d0f%2Fdatabases%2F(default)&gsessionid=efa0Ak9TDHjNvv60a29un1WcOfCTZ5_mfrVKrsmVhUc&SID=I4YOlkQ0MPp8G67dYXG_nA&RID=32971&TYPE=terminate&zx=36eft4k7hovu net::ERR_BLOCKED_BY_CLIENT
gc @ firebase_firestore.js?v=d58f0536:2141
Y2.close @ firebase_firestore.js?v=d58f0536:2485
To @ firebase_firestore.js?v=d58f0536:12253
close @ firebase_firestore.js?v=d58f0536:12093
close @ firebase_firestore.js?v=d58f0536:12485
__ @ firebase_firestore.js?v=d58f0536:12443
(anonymous) @ firebase_firestore.js?v=d58f0536:12434
(anonymous) @ firebase_firestore.js?v=d58f0536:13135
(anonymous) @ firebase_firestore.js?v=d58f0536:15549
(anonymous) @ firebase_firestore.js?v=d58f0536:15580
Promise.then
gu @ firebase_firestore.js?v=d58f0536:15580
enqueue @ firebase_firestore.js?v=d58f0536:15549
enqueueAndForget @ firebase_firestore.js?v=d58f0536:15531
handleDelayElapsed @ firebase_firestore.js?v=d58f0536:13135
(anonymous) @ firebase_firestore.js?v=d58f0536:13115
setTimeout
start @ firebase_firestore.js?v=d58f0536:13115
createAndSchedule @ firebase_firestore.js?v=d58f0536:13108
enqueueAfterDelay @ firebase_firestore.js?v=d58f0536:15601
o_ @ firebase_firestore.js?v=d58f0536:12434
__PRIVATE_fillWritePipeline @ firebase_firestore.js?v=d58f0536:12968
await in __PRIVATE_fillWritePipeline
__PRIVATE_onMutationResult @ firebase_firestore.js?v=d58f0536:13002
await in __PRIVATE_onMutationResult
onNext @ firebase_firestore.js?v=d58f0536:12632
(anonymous) @ firebase_firestore.js?v=d58f0536:12520
(anonymous) @ firebase_firestore.js?v=d58f0536:12540
(anonymous) @ firebase_firestore.js?v=d58f0536:15549
(anonymous) @ firebase_firestore.js?v=d58f0536:15580
Promise.then
gu @ firebase_firestore.js?v=d58f0536:15580
enqueue @ firebase_firestore.js?v=d58f0536:15549
enqueueAndForget @ firebase_firestore.js?v=d58f0536:15531
(anonymous) @ firebase_firestore.js?v=d58f0536:12540
(anonymous) @ firebase_firestore.js?v=d58f0536:12520
bo @ firebase_firestore.js?v=d58f0536:12108
(anonymous) @ firebase_firestore.js?v=d58f0536:12294
(anonymous) @ firebase_firestore.js?v=d58f0536:12257
ab @ firebase_firestore.js?v=d58f0536:944
F2 @ firebase_firestore.js?v=d58f0536:914
Z2.ta @ firebase_firestore.js?v=d58f0536:2534
Rb @ firebase_firestore.js?v=d58f0536:1413
M2.Y @ firebase_firestore.js?v=d58f0536:1278
M2.ca @ firebase_firestore.js?v=d58f0536:1209
ab @ firebase_firestore.js?v=d58f0536:944
F2 @ firebase_firestore.js?v=d58f0536:914
Wc @ firebase_firestore.js?v=d58f0536:1948
h.bb @ firebase_firestore.js?v=d58f0536:1943
h.Ea @ firebase_firestore.js?v=d58f0536:1940
Lc @ firebase_firestore.js?v=d58f0536:1840
h.Pa @ firebase_firestore.js?v=d58f0536:1807
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Pa @ firebase_firestore.js?v=d58f0536:1808
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Pa @ firebase_firestore.js?v=d58f0536:1808
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Pa @ firebase_firestore.js?v=d58f0536:1808
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Pa @ firebase_firestore.js?v=d58f0536:1808
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Pa @ firebase_firestore.js?v=d58f0536:1808
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Pa @ firebase_firestore.js?v=d58f0536:1808
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Pa @ firebase_firestore.js?v=d58f0536:1808
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Pa @ firebase_firestore.js?v=d58f0536:1808
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Sa @ firebase_firestore.js?v=d58f0536:1794
Promise.then
h.send @ firebase_firestore.js?v=d58f0536:1775
h.ea @ firebase_firestore.js?v=d58f0536:1916
Jb @ firebase_firestore.js?v=d58f0536:1202
fd @ firebase_firestore.js?v=d58f0536:2335
h.Fa @ firebase_firestore.js?v=d58f0536:2302
Da @ firebase_firestore.js?v=d58f0536:663
Promise.then
x2 @ firebase_firestore.js?v=d58f0536:657
ec @ firebase_firestore.js?v=d58f0536:2288
Rb @ firebase_firestore.js?v=d58f0536:1410
M2.Y @ firebase_firestore.js?v=d58f0536:1278
M2.ca @ firebase_firestore.js?v=d58f0536:1209
ab @ firebase_firestore.js?v=d58f0536:944
F2 @ firebase_firestore.js?v=d58f0536:914
Wc @ firebase_firestore.js?v=d58f0536:1948
h.bb @ firebase_firestore.js?v=d58f0536:1943
h.Ea @ firebase_firestore.js?v=d58f0536:1940
Lc @ firebase_firestore.js?v=d58f0536:1840
h.Pa @ firebase_firestore.js?v=d58f0536:1807
Promise.then
Nc @ firebase_firestore.js?v=d58f0536:1798
h.Sa @ firebase_firestore.js?v=d58f0536:1794
Promise.then
h.send @ firebase_firestore.js?v=d58f0536:1775
h.ea @ firebase_firestore.js?v=d58f0536:1916
Jb @ firebase_firestore.js?v=d58f0536:1197
Hb @ firebase_firestore.js?v=d58f0536:1172
h.Ga @ firebase_firestore.js?v=d58f0536:2222
Da @ firebase_firestore.js?v=d58f0536:663
Promise.then
x2 @ firebase_firestore.js?v=d58f0536:657
fc @ firebase_firestore.js?v=d58f0536:2166
h.connect @ firebase_firestore.js?v=d58f0536:2126
Y2.m @ firebase_firestore.js?v=d58f0536:2482
Io @ firebase_firestore.js?v=d58f0536:12251
send @ firebase_firestore.js?v=d58f0536:12096
a_ @ firebase_firestore.js?v=d58f0536:12438
p_ @ firebase_firestore.js?v=d58f0536:12641
__PRIVATE_onWriteStreamOpen @ firebase_firestore.js?v=d58f0536:12992
(anonymous) @ firebase_firestore.js?v=d58f0536:12516
(anonymous) @ firebase_firestore.js?v=d58f0536:12540
(anonymous) @ firebase_firestore.js?v=d58f0536:15549
(anonymous) @ firebase_firestore.js?v=d58f0536:15580
Promise.then
gu @ firebase_firestore.js?v=d58f0536:15580
enqueue @ firebase_firestore.js?v=d58f0536:15549
enqueueAndForget @ firebase_firestore.js?v=d58f0536:15531
(anonymous) @ firebase_firestore.js?v=d58f0536:12540
(anonymous) @ firebase_firestore.js?v=d58f0536:12516
wo @ firebase_firestore.js?v=d58f0536:12102
(anonymous) @ firebase_firestore.js?v=d58f0536:12299
setTimeout
Bo @ firebase_firestore.js?v=d58f0536:12298
T_ @ firebase_firestore.js?v=d58f0536:12620
P_ @ firebase_firestore.js?v=d58f0536:12513
(anonymous) @ firebase_firestore.js?v=d58f0536:12503
Promise.then
auth @ firebase_firestore.js?v=d58f0536:12499
start @ firebase_firestore.js?v=d58f0536:12398
start @ firebase_firestore.js?v=d58f0536:12614
__PRIVATE_startWriteStream @ firebase_firestore.js?v=d58f0536:12989
__PRIVATE_fillWritePipeline @ firebase_firestore.js?v=d58f0536:12975
await in __PRIVATE_fillWritePipeline
__PRIVATE_syncEngineWrite @ firebase_firestore.js?v=d58f0536:13971
await in __PRIVATE_syncEngineWrite
(anonymous) @ firebase_firestore.js?v=d58f0536:17306
await in (anonymous)
(anonymous) @ firebase_firestore.js?v=d58f0536:15549
(anonymous) @ firebase_firestore.js?v=d58f0536:15580
Promise.then
gu @ firebase_firestore.js?v=d58f0536:15580
enqueue @ firebase_firestore.js?v=d58f0536:15549
enqueueAndForget @ firebase_firestore.js?v=d58f0536:15531
__PRIVATE_firestoreClientWrite @ firebase_firestore.js?v=d58f0536:17306
executeWrite @ firebase_firestore.js?v=d58f0536:17307
setDoc @ firebase_firestore.js?v=d58f0536:17237
(anonymous) @ useAuth.js:47
(anonymous) @ firebase_auth.js?v=d58f0536:2687
Promise.then
registerStateListener @ firebase_auth.js?v=d58f0536:2683
onAuthStateChanged @ firebase_auth.js?v=d58f0536:2543
onAuthStateChanged @ firebase_auth.js?v=d58f0536:4794
(anonymous) @ useAuth.js:38
commitHookEffectListMount @ chunk-BVI7NZOO.js?v=d58f0536:16915
invokePassiveEffectMountInDEV @ chunk-BVI7NZOO.js?v=d58f0536:18324
invokeEffectsInDev @ chunk-BVI7NZOO.js?v=d58f0536:19701
commitDoubleInvokeEffectsInDEV @ chunk-BVI7NZOO.js?v=d58f0536:19686
flushPassiveEffectsImpl @ chunk-BVI7NZOO.js?v=d58f0536:19503
flushPassiveEffects @ chunk-BVI7NZOO.js?v=d58f0536:19447
commitRootImpl @ chunk-BVI7NZOO.js?v=d58f0536:19416
commitRoot @ chunk-BVI7NZOO.js?v=d58f0536:19277
performSyncWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18895
flushSyncCallbacks @ chunk-BVI7NZOO.js?v=d58f0536:9119
flushSync @ chunk-BVI7NZOO.js?v=d58f0536:18959
scheduleRoot @ chunk-BVI7NZOO.js?v=d58f0536:20015
(anonymous) @ @react-refresh:208
performReactRefresh @ @react-refresh:190
(anonymous) @ @react-refresh:586
setTimeout
(anonymous) @ @react-refresh:576
validateRefreshBoundaryAndEnqueueUpdate @ @react-refresh:625
(anonymous) @ KnockoutPage.jsx?t=1753727802102:1160
(anonymous) @ client:34
(anonymous) @ client:218
(anonymous) @ client:193
queueUpdate @ client:193
await in queueUpdate
(anonymous) @ client:642
handleMessage @ client:640
(anonymous) @ client:550
useAuth.js:47  POST https://firestore.googleapis.com/google.firestore.v1.Firestore/Listen/channel?VER=8&database=projects%2Ftournament-manager-a4d0f%2Fdatabases%2F(default)&gsessionid=ZKA1TSCKMyVyeGuf_OCXKfxrjWKEZF7Np3is5gxJuYE&SID=aG6ntX_PHZKkii-IvRyQBQ&RID=72752&TYPE=terminate&zx=q762cvwvascj net::ERR_BLOCKED_BY_CLIENT
gc @ firebase_firestore.js?v=d58f0536:2141
Y2.close @ firebase_firestore.js?v=d58f0536:2485
To @ firebase_firestore.js?v=d58f0536:12253
close @ firebase_firestore.js?v=d58f0536:12093
close @ firebase_firestore.js?v=d58f0536:12485
stop @ firebase_firestore.js?v=d58f0536:12407
(anonymous) @ firebase_firestore.js?v=d58f0536:13062
__PRIVATE_disableNetworkInternal @ firebase_firestore.js?v=d58f0536:12816
await in __PRIVATE_disableNetworkInternal
__PRIVATE_remoteStoreHandleCredentialChange @ firebase_firestore.js?v=d58f0536:13026
(anonymous) @ firebase_firestore.js?v=d58f0536:14905
(anonymous) @ firebase_firestore.js?v=d58f0536:14853
__PRIVATE_guardedChangeListener @ firebase_firestore.js?v=d58f0536:2830
(anonymous) @ firebase_firestore.js?v=d58f0536:2833
pu @ firebase_firestore.js?v=d58f0536:15561
(anonymous) @ firebase_firestore.js?v=d58f0536:15552
(anonymous) @ firebase_firestore.js?v=d58f0536:15549
(anonymous) @ firebase_firestore.js?v=d58f0536:15580
Promise.then
gu @ firebase_firestore.js?v=d58f0536:15580
enqueue @ firebase_firestore.js?v=d58f0536:15549
enqueueAndForget @ firebase_firestore.js?v=d58f0536:15531
enqueueRetryable @ firebase_firestore.js?v=d58f0536:15552
o @ firebase_firestore.js?v=d58f0536:2833
(anonymous) @ firebase_auth.js?v=d58f0536:7521
(anonymous) @ chunk-LI5F3G23.js?v=d58f0536:603
(anonymous) @ chunk-LI5F3G23.js?v=d58f0536:695
Promise.then
sendOne @ chunk-LI5F3G23.js?v=d58f0536:692
forEachObserver @ chunk-LI5F3G23.js?v=d58f0536:685
next @ chunk-LI5F3G23.js?v=d58f0536:602
notifyAuthListeners @ firebase_auth.js?v=d58f0536:2662
_notifyListenersIfCurrent @ firebase_auth.js?v=d58f0536:2635
getIdToken @ firebase_auth.js?v=d58f0536:1662
await in getIdToken
iteration @ firebase_auth.js?v=d58f0536:1402
(anonymous) @ firebase_auth.js?v=d58f0536:1397
setTimeout
schedule @ firebase_auth.js?v=d58f0536:1396
_start @ firebase_auth.js?v=d58f0536:1363
_startProactiveRefresh @ firebase_auth.js?v=d58f0536:1719
_startProactiveRefresh @ firebase_auth.js?v=d58f0536:2644
updateProactiveRefresh @ firebase_auth.js?v=d58f0536:7545
addAuthTokenListener @ firebase_auth.js?v=d58f0536:7524
__PRIVATE_registerAuth @ firebase_firestore.js?v=d58f0536:2841
(anonymous) @ firebase_firestore.js?v=d58f0536:2843
onInit @ chunk-LI5F3G23.js?v=d58f0536:923
start @ firebase_firestore.js?v=d58f0536:2843
FirestoreClient @ firebase_firestore.js?v=d58f0536:14852
__PRIVATE_configureFirestore @ firebase_firestore.js?v=d58f0536:15787
ensureFirestoreConfigured @ firebase_firestore.js?v=d58f0536:15777
executeWrite @ firebase_firestore.js?v=d58f0536:17307
setDoc @ firebase_firestore.js?v=d58f0536:17237
(anonymous) @ useAuth.js:47
(anonymous) @ firebase_auth.js?v=d58f0536:2687
Promise.then
registerStateListener @ firebase_auth.js?v=d58f0536:2683
onAuthStateChanged @ firebase_auth.js?v=d58f0536:2543
onAuthStateChanged @ firebase_auth.js?v=d58f0536:4794
(anonymous) @ useAuth.js:38
commitHookEffectListMount @ chunk-BVI7NZOO.js?v=d58f0536:16915
invokePassiveEffectMountInDEV @ chunk-BVI7NZOO.js?v=d58f0536:18324
invokeEffectsInDev @ chunk-BVI7NZOO.js?v=d58f0536:19701
commitDoubleInvokeEffectsInDEV @ chunk-BVI7NZOO.js?v=d58f0536:19686
flushPassiveEffectsImpl @ chunk-BVI7NZOO.js?v=d58f0536:19503
flushPassiveEffects @ chunk-BVI7NZOO.js?v=d58f0536:19447
(anonymous) @ chunk-BVI7NZOO.js?v=d58f0536:19328
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:42 Firebase Auth State Changed: User signed in: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
useAuth.js:53 User profile ensured in Firestore for: 0hM1A80ETbX2zCvRBxQEJDJLUEU2
chunk-BVI7NZOO.js?v=d58f0536:11678 Uncaught Error: Rendered more hooks than during the previous render.
    at updateWorkInProgressHook (chunk-BVI7NZOO.js?v=d58f0536:11678:21)
    at updateCallback (chunk-BVI7NZOO.js?v=d58f0536:12177:22)
    at Object.useCallback (chunk-BVI7NZOO.js?v=d58f0536:12693:22)
    at useCallback (chunk-4HAMFFQC.js?v=d58f0536:1090:29)
    at KnockoutPage (KnockoutPage.jsx:616:31)
    at renderWithHooks (chunk-BVI7NZOO.js?v=d58f0536:11548:26)
    at updateFunctionComponent (chunk-BVI7NZOO.js?v=d58f0536:14582:28)
    at beginWork (chunk-BVI7NZOO.js?v=d58f0536:15924:22)
    at HTMLUnknownElement.callCallback2 (chunk-BVI7NZOO.js?v=d58f0536:3674:22)
    at Object.invokeGuardedCallbackDev (chunk-BVI7NZOO.js?v=d58f0536:3699:24)
updateWorkInProgressHook @ chunk-BVI7NZOO.js?v=d58f0536:11678
updateCallback @ chunk-BVI7NZOO.js?v=d58f0536:12177
useCallback @ chunk-BVI7NZOO.js?v=d58f0536:12693
useCallback @ chunk-4HAMFFQC.js?v=d58f0536:1090
KnockoutPage @ KnockoutPage.jsx:616
renderWithHooks @ chunk-BVI7NZOO.js?v=d58f0536:11548
updateFunctionComponent @ chunk-BVI7NZOO.js?v=d58f0536:14582
beginWork @ chunk-BVI7NZOO.js?v=d58f0536:15924
callCallback2 @ chunk-BVI7NZOO.js?v=d58f0536:3674
invokeGuardedCallbackDev @ chunk-BVI7NZOO.js?v=d58f0536:3699
invokeGuardedCallback @ chunk-BVI7NZOO.js?v=d58f0536:3733
beginWork$1 @ chunk-BVI7NZOO.js?v=d58f0536:19765
performUnitOfWork @ chunk-BVI7NZOO.js?v=d58f0536:19198
workLoopSync @ chunk-BVI7NZOO.js?v=d58f0536:19137
renderRootSync @ chunk-BVI7NZOO.js?v=d58f0536:19116
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18678
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
chunk-BVI7NZOO.js?v=d58f0536:11678 Uncaught Error: Rendered more hooks than during the previous render.
    at updateWorkInProgressHook (chunk-BVI7NZOO.js?v=d58f0536:11678:21)
    at updateCallback (chunk-BVI7NZOO.js?v=d58f0536:12177:22)
    at Object.useCallback (chunk-BVI7NZOO.js?v=d58f0536:12693:22)
    at useCallback (chunk-4HAMFFQC.js?v=d58f0536:1090:29)
    at KnockoutPage (KnockoutPage.jsx:616:31)
    at renderWithHooks (chunk-BVI7NZOO.js?v=d58f0536:11548:26)
    at updateFunctionComponent (chunk-BVI7NZOO.js?v=d58f0536:14582:28)
    at beginWork (chunk-BVI7NZOO.js?v=d58f0536:15924:22)
    at HTMLUnknownElement.callCallback2 (chunk-BVI7NZOO.js?v=d58f0536:3674:22)
    at Object.invokeGuardedCallbackDev (chunk-BVI7NZOO.js?v=d58f0536:3699:24)
updateWorkInProgressHook @ chunk-BVI7NZOO.js?v=d58f0536:11678
updateCallback @ chunk-BVI7NZOO.js?v=d58f0536:12177
useCallback @ chunk-BVI7NZOO.js?v=d58f0536:12693
useCallback @ chunk-4HAMFFQC.js?v=d58f0536:1090
KnockoutPage @ KnockoutPage.jsx:616
renderWithHooks @ chunk-BVI7NZOO.js?v=d58f0536:11548
updateFunctionComponent @ chunk-BVI7NZOO.js?v=d58f0536:14582
beginWork @ chunk-BVI7NZOO.js?v=d58f0536:15924
callCallback2 @ chunk-BVI7NZOO.js?v=d58f0536:3674
invokeGuardedCallbackDev @ chunk-BVI7NZOO.js?v=d58f0536:3699
invokeGuardedCallback @ chunk-BVI7NZOO.js?v=d58f0536:3733
beginWork$1 @ chunk-BVI7NZOO.js?v=d58f0536:19765
performUnitOfWork @ chunk-BVI7NZOO.js?v=d58f0536:19198
workLoopSync @ chunk-BVI7NZOO.js?v=d58f0536:19137
renderRootSync @ chunk-BVI7NZOO.js?v=d58f0536:19116
recoverFromConcurrentError @ chunk-BVI7NZOO.js?v=d58f0536:18736
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18684
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
hook.js:608 The above error occurred in the <KnockoutPage> component:

    at KnockoutPage (http://localhost:5173/src/pages/KnockoutPage.jsx?t=1753728241547:27:32)
    at ProtectedRoute (http://localhost:5173/src/components/ProtectedRoute.jsx:21:42)
    at RenderedRoute (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:4088:5)
    at Routes (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:4558:5)
    at div
    at div
    at Router (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:4501:15)
    at BrowserRouter (http://localhost:5173/node_modules/.vite/deps/react-router-dom.js?v=d58f0536:5247:5)
    at App (http://localhost:5173/src/App.jsx?t=1753727692521:34:37)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.
overrideMethod @ hook.js:608
logCapturedError @ chunk-BVI7NZOO.js?v=d58f0536:14032
update.callback @ chunk-BVI7NZOO.js?v=d58f0536:14052
callCallback @ chunk-BVI7NZOO.js?v=d58f0536:11248
commitUpdateQueue @ chunk-BVI7NZOO.js?v=d58f0536:11265
commitLayoutEffectOnFiber @ chunk-BVI7NZOO.js?v=d58f0536:17093
commitLayoutMountEffects_complete @ chunk-BVI7NZOO.js?v=d58f0536:17980
commitLayoutEffects_begin @ chunk-BVI7NZOO.js?v=d58f0536:17969
commitLayoutEffects @ chunk-BVI7NZOO.js?v=d58f0536:17920
commitRootImpl @ chunk-BVI7NZOO.js?v=d58f0536:19353
commitRoot @ chunk-BVI7NZOO.js?v=d58f0536:19277
finishConcurrentRender @ chunk-BVI7NZOO.js?v=d58f0536:18760
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18718
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384
chunk-BVI7NZOO.js?v=d58f0536:11678 Uncaught Error: Rendered more hooks than during the previous render.
    at updateWorkInProgressHook (chunk-BVI7NZOO.js?v=d58f0536:11678:21)
    at updateCallback (chunk-BVI7NZOO.js?v=d58f0536:12177:22)
    at Object.useCallback (chunk-BVI7NZOO.js?v=d58f0536:12693:22)
    at useCallback (chunk-4HAMFFQC.js?v=d58f0536:1090:29)
    at KnockoutPage (KnockoutPage.jsx:616:31)
    at renderWithHooks (chunk-BVI7NZOO.js?v=d58f0536:11548:26)
    at updateFunctionComponent (chunk-BVI7NZOO.js?v=d58f0536:14582:28)
    at beginWork (chunk-BVI7NZOO.js?v=d58f0536:15924:22)
    at beginWork$1 (chunk-BVI7NZOO.js?v=d58f0536:19753:22)
    at performUnitOfWork (chunk-BVI7NZOO.js?v=d58f0536:19198:20)
updateWorkInProgressHook @ chunk-BVI7NZOO.js?v=d58f0536:11678
updateCallback @ chunk-BVI7NZOO.js?v=d58f0536:12177
useCallback @ chunk-BVI7NZOO.js?v=d58f0536:12693
useCallback @ chunk-4HAMFFQC.js?v=d58f0536:1090
KnockoutPage @ KnockoutPage.jsx:616
renderWithHooks @ chunk-BVI7NZOO.js?v=d58f0536:11548
updateFunctionComponent @ chunk-BVI7NZOO.js?v=d58f0536:14582
beginWork @ chunk-BVI7NZOO.js?v=d58f0536:15924
beginWork$1 @ chunk-BVI7NZOO.js?v=d58f0536:19753
performUnitOfWork @ chunk-BVI7NZOO.js?v=d58f0536:19198
workLoopSync @ chunk-BVI7NZOO.js?v=d58f0536:19137
renderRootSync @ chunk-BVI7NZOO.js?v=d58f0536:19116
recoverFromConcurrentError @ chunk-BVI7NZOO.js?v=d58f0536:18736
performConcurrentWorkOnRoot @ chunk-BVI7NZOO.js?v=d58f0536:18684
workLoop @ chunk-BVI7NZOO.js?v=d58f0536:197
flushWork @ chunk-BVI7NZOO.js?v=d58f0536:176
performWorkUntilDeadline @ chunk-BVI7NZOO.js?v=d58f0536:384


-------------------------------------------------------------

fix all these errors.